import{r as a,R as N,S as y,j as e,B as n,W as w}from"./index-BJm5hHGn.js";import{H as o,F as c,T as b}from"./TrustBadges-K0LKyZgp.js";import{L as v,D as g}from"./DocumentPreview-C51vgXNK.js";import{A as r}from"./AnimateOnScroll-bbcasWVl.js";import{C as S}from"./CheckCircleIcon-BcO_1wd9.js";import"./SearchIcon-DbBn6_4B.js";import"./ShieldCheckIcon-Cz-BOvG1.js";const H=()=>{const{route:m}=a.useContext(N),{documentHistory:x,updateDocumentStatusInHistory:d}=a.useContext(y),[i,l]=a.useState(!1),[u,h]=a.useState(!1),p=m.split("/invoice/")[1],t=x.find(s=>s.publicId===p);a.useEffect(()=>{const s=t.createElement("meta");return s.name="robots",s.content="noindex, nofollow",t.head.appendChild(s),()=>{t.head.removeChild(s)}},[]);const f=async()=>{t&&(l(!0),await new Promise(s=>setTimeout(s,1500)),await d(t.id,"paid"),l(!1),h(!0))};if(!t||t.documentType!=="Invoice")return e.jsxs("div",{className:"bg-slate-950 text-white min-h-screen",children:[e.jsx(o,{}),e.jsxs("main",{className:"pt-32 text-center container mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Invoice Not Found"}),e.jsx("p",{className:"text-slate-400 mt-4",children:"The invoice you are looking for does not exist or the link is invalid."}),e.jsx(n,{href:"/",className:"mt-8",children:"Return to Homepage"})]}),e.jsx(c,{})]});const j=t.paymentStatus==="paid"||u;return e.jsxs("div",{className:"bg-slate-950 text-white font-sans animate-content-fade-in",children:[e.jsx(w,{}),e.jsx(o,{}),e.jsx("main",{id:"top",className:"relative z-10 pt-24",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("header",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl font-extrabold text-white",children:["Invoice #",t.documentNumber]}),e.jsxs("p",{className:"text-slate-400 mt-2",children:["From ",t.companyDetails.name," for ",t.clientDetails.company]})]}),j?e.jsx(r,{children:e.jsxs("div",{className:"text-center p-8 bg-green-900/40 border border-green-500/50 rounded-lg",children:[e.jsx(S,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Payment Received!"}),e.jsx("p",{className:"text-green-200 mt-2",children:"Thank you for your payment. This invoice is now fully paid."})]})}):e.jsx(r,{children:e.jsxs("div",{className:"text-center p-8 bg-slate-900/50 border border-slate-800 rounded-lg flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Total Due: ",t.currency,t.total.toFixed(2)]}),e.jsxs("p",{className:"text-slate-400",children:["Due by: ",new Date(t.dueDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[t.paymentLink&&e.jsxs(n,{href:t.paymentLink,className:"w-full sm:w-auto",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Pay Now"]}),e.jsx(n,{onClick:f,variant:"secondary",className:"w-full sm:w-auto",disabled:i,children:i?"Processing...":"Simulate Successful Payment"})]})]})}),e.jsx("div",{className:"mt-8",children:e.jsx(g,{document:t,previewId:`public-invoice-${t.publicId}`})})]})})}),e.jsx(c,{}),e.jsx(b,{})]})};export{H as default};
