import{j as e,r as a,B as k,A as ne,u as Fe,c as ce,V as X,R as xs,S as R,F as fe,f as hs,L as ge,I as Qs,e as us,h as Js,d as de,k as Zs,l as Xs,m as et,n as st,o as tt,p as at,q as me,t as lt,v as Pe,C as ve,w as nt,x as rt,y as be,z as it,D as ot,E as ct,T as Me,G as dt,a as B,H as Ae,J as mt,K as ps,M as gs,O as js,P as xt,Q as bs,U as ht}from"./index-BJm5hHGn.js";import{i as y,l as f}from"./formStyles-DqvmmO9K.js";import{L as fs,D as Ns}from"./DocumentPreview-C51vgXNK.js";import{A as Ee}from"./AlertTriangleIcon-C8lQ2MQs.js";import{u as xe,X as $e,S as ut}from"./ShieldCheckIcon-Cz-BOvG1.js";import{M as Le}from"./MailIcon-BGvp_ofM.js";import{A as pt,L as gt,X as Be,E as Re,B as jt,C as bt,a as ft,b as Nt,c as vt,p as yt,d as wt,e as Ct,P as kt}from"./ProjectTimelineChart-Dg6nh18f.js";import{P as vs}from"./ProjectIcon-NhewKK2n.js";import{C as ye,G as ys,P as we,S as Ce,Z as ws}from"./SendIcon-BzoNJUm9.js";import{C as je}from"./CheckCircleIcon-BcO_1wd9.js";import{U as Cs}from"./UploadIcon-DK6tjOt1.js";import{F as ks}from"./FacebookIcon-ClezJCgc.js";import{S as St}from"./SearchIcon-DbBn6_4B.js";const Ss=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Dt=({isOpen:s,onClose:l})=>{const i=a.useRef(null);return xe(i,s,l),s?e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in",onClick:l,role:"dialog","aria-modal":"true","aria-labelledby":"forgot-password-title",children:e.jsxs("div",{ref:i,className:"relative max-w-md w-11/12 bg-slate-900 border border-blue-500/50 rounded-2xl shadow-2xl overflow-hidden",onClick:o=>o.stopPropagation(),children:[e.jsx("button",{onClick:l,className:"absolute top-4 right-4 text-slate-400 hover:text-white transition-colors z-10","aria-label":"Close",children:e.jsx($e,{className:"w-6 h-6"})}),e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Le,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),e.jsx("h2",{id:"forgot-password-title",className:"text-2xl font-bold text-white mb-4",children:"Password Reset"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"To reset your password, please contact our support team. An administrator will assist you with the process."}),e.jsx("p",{className:"text-sm bg-slate-800/50 p-3 rounded-md",children:e.jsx("a",{href:"mailto:info@prevaledge.com",className:"font-semibold text-blue-400 hover:underline",children:"info@prevaledge.com"})}),e.jsx("div",{className:"mt-8",children:e.jsx(k,{onClick:l,className:"w-full",children:"Got it"})})]})]})}):null},It=()=>{const{login:s}=a.useContext(ne),{values:l,errors:i,touched:o,handleChange:t,handleBlur:n,validateForm:r}=Fe({email:"",password:""},{email:S=>X.required(S)||X.email(S),password:X.required}),[c,u]=a.useState(""),[d,h]=a.useState(!1),[x,m]=a.useState(!1),p=async S=>{if(S.preventDefault(),!!r()){u(""),h(!0);try{await s(l.email,l.password)}catch(w){u(w.message||"An unknown error occurred.")}finally{h(!1)}}},j=S=>{const w=`${y.replace("text-sm","")} pl-10 form-input-futuristic`;return o[S]&&i[S]?`${w} border-red-500 focus:ring-red-500`:w};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white p-4 bg-grid-pattern",children:[e.jsxs("div",{className:"w-full max-w-4xl mx-auto grid lg:grid-cols-2 bg-slate-900/50 border border-slate-800 rounded-lg shadow-2xl backdrop-blur-lg overflow-hidden animate-modal-entry",children:[e.jsx("div",{className:"hidden lg:flex flex-col items-center justify-center p-12 aurora-bg aurora-bg-deep border-r border-slate-800",children:e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsx("div",{className:"animate-logo-breathing",children:e.jsx(ce,{className:"w-20 h-20 text-blue-400"})}),e.jsx("h1",{className:"text-4xl font-bold mt-4",children:"Prevaledge"}),e.jsx("p",{className:"text-slate-400 mt-2 text-center",children:"Control Center for Your Digital Presence."})]})}),e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"text-center mb-8 lg:hidden",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto text-blue-400 mb-4"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Panel"})]}),e.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-1",children:"Welcome Back"}),e.jsx("p",{className:"text-slate-400 text-center mb-8",children:"Please sign in to continue"}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500 pointer-events-none"}),e.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:t,onBlur:n,className:j("email"),autoComplete:"email"})]}),o.email&&i.email&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:i.email})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300",children:"Password"}),e.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-xs text-blue-400 hover:underline",children:"Forgot Password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500 pointer-events-none"}),e.jsx("input",{type:"password",id:"password",name:"password",value:l.password,onChange:t,onBlur:n,className:j("password"),autoComplete:"current-password"})]}),o.password&&i.password&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:i.password})]}),c&&e.jsxs("div",{role:"alert",className:"bg-red-900/50 border border-red-500/50 text-red-300 text-sm rounded-lg p-3 flex items-center gap-3",children:[e.jsx(Ee,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:c})]}),e.jsx("div",{children:e.jsx(k,{type:"submit",className:"w-full",disabled:d,children:d?"Signing In...":"Sign In"})})]})]})]}),e.jsx(Dt,{isOpen:x,onClose:()=>m(!1)})]})},Tt=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),pe=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Oe=s=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Pt=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),e.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),e.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]}),At=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"}),e.jsx("path",{d:"M7 7h.01"})]}),Ft=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),e.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),e.jsx("path",{d:"M12 11h4"}),e.jsx("path",{d:"M12 16h4"}),e.jsx("path",{d:"M8 11h.01"}),e.jsx("path",{d:"M8 16h.01"})]}),Lt=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),Ne=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M12 2a10 10 0 1 0 10 10"}),e.jsx("path",{d:"M12 12a2 2 0 1 0 2-2"}),e.jsx("path",{d:"M12 12v10"})]}),Ds=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),e.jsx("path",{d:"M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1Z"}),e.jsx("circle",{cx:"11.5",cy:"14.5",r:"2.5"}),e.jsx("path",{d:"M13.25 16.25 15 18"})]}),Mt=({currentUser:s,activeView:l,setActiveView:i,onLogout:o,isSidebarOpen:t,setIsSidebarOpen:n,hasPermission:r})=>{const{navigate:c}=a.useContext(xs),{hasNewSubmission:u,clearNewSubmission:d}=a.useContext(R),h=p=>{i(p),n(!1),p==="analytics"&&d()},x=[{title:"Overview",items:[{id:"dashboard",label:"Dashboard",icon:Tt},{id:"analytics",label:"Analytics",icon:Pt}]},{title:"AI & Strategy",items:[{id:"strategist",label:"The Strategist",icon:ce},{id:"horizonScanner",label:"Horizon Scanner",icon:Ne},{id:"leadGenNurture",label:"Lead Gen & Nurture",icon:Ds}]},{title:"Operations",items:[{id:"tasks",label:"Task Management",icon:ye},{id:"clients",label:"Client Management",icon:Lt},{id:"invoicing",label:"Invoice Generator",icon:fe},{id:"quotations",label:"Quote Generator",icon:Ft},{id:"documentHistory",label:"Document History",icon:pt}]},{title:"Content & Site",items:[{id:"blog",label:"Manage Blog",icon:fe},{id:"projects",label:"Manage Projects",icon:vs},{id:"services",label:"Manage Services",icon:hs},{id:"pricing",label:"Manage Pricing",icon:At},{id:"testimonials",label:"Manage Testimonials",icon:Oe},{id:"socials",label:"Manage Socials",icon:ge},{id:"careers",label:"Manage Careers",icon:ys},{id:"jobApplications",label:"Job Applications",icon:pe}]},{title:"Administration",items:[{id:"users",label:"Users & Permissions",icon:pe}]}],m=e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-6 border-b border-slate-800",children:e.jsxs("a",{href:"/site",onClick:p=>{p.preventDefault(),c("/site")},className:"flex items-center gap-2 text-xl font-bold transition-colors duration-300 text-slate-100 hover:text-blue-400",children:[e.jsx(ce,{className:"w-8 h-8 text-blue-400"}),e.jsx("span",{children:"Prevaledge"})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:x.map(p=>{const j=p.items.filter(S=>r(S.id));return j.length===0?null:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"px-4 pt-4 pb-2 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:p.title}),j.map(S=>{const w=l===S.id,g=S.id==="analytics"&&u;return e.jsxs("button",{onClick:()=>h(S.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors duration-200 relative ${w?"bg-blue-600 text-white shadow-lg":"text-slate-300 hover:bg-slate-800"}`,children:[e.jsx(S.icon,{className:"w-6 h-6"}),e.jsx("span",{children:S.label}),g&&e.jsxs("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-blue-500"})]})]},S.id)})]},p.title)})}),e.jsxs("div",{className:"p-4 border-t border-slate-800",children:[e.jsxs("div",{className:"px-4 py-3 mb-2",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:s.name}),e.jsx("p",{className:"text-xs text-slate-400",children:s.role})]}),e.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-slate-300 hover:bg-slate-800 transition-colors duration-200",children:[e.jsx(gt,{className:"w-6 h-6"}),e.jsx("span",{children:"Logout"})]})]})]});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 z-40 bg-black/60 lg:hidden transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>n(!1),"aria-hidden":"true"}),e.jsx("aside",{className:`
          fixed top-0 left-0 h-full w-64 bg-slate-900 border-r border-slate-800 z-50 
          transform transition-transform duration-300 ease-in-out
          lg:relative lg:translate-x-0 lg:flex-shrink-0
          ${t?"translate-x-0":"-translate-x-full"}
        `,children:m})]})},Is=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),e.jsx("path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"})]}),Et=({onClose:s,onViewClick:l})=>{const[i,o]=a.useState(!1);return a.useEffect(()=>{const t=setTimeout(()=>o(!0),100);return()=>clearTimeout(t)},[]),e.jsx("div",{role:"alert",className:`fixed top-6 right-6 z-[100] w-full max-w-sm p-4 rounded-lg shadow-2xl text-white transition-all duration-500 ease-out
        bg-slate-800/80 backdrop-blur-lg border border-blue-500/50
        ${i?"opacity-100 translate-x-0":"opacity-0 translate-x-12"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:e.jsx(Is,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-100",children:"New Lead Received!"}),e.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"A new contact form has been submitted."}),e.jsxs("div",{className:"mt-3 flex gap-3",children:[e.jsx("button",{onClick:l,className:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-blue-500",children:"View"}),e.jsx("button",{onClick:s,className:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium text-slate-300 bg-white/5 border border-white/10 rounded-md hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-slate-500",children:"Dismiss"})]})]}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsxs("button",{onClick:s,className:"inline-flex text-slate-400 rounded-md hover:text-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-slate-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})]})})]})})},$t=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Bt={info:e.jsx(Qs,{className:"w-6 h-6 text-blue-300"}),success:e.jsx(je,{className:"w-6 h-6 text-green-300"}),warning:e.jsx($t,{className:"w-6 h-6 text-yellow-300"}),error:e.jsx(Be,{className:"w-6 h-6 text-red-300"})},Rt={info:"border-blue-500/50",success:"border-green-500/50",warning:"border-yellow-500/50",error:"border-red-500/50"},Ot=({notification:s,onClose:l})=>{const[i,o]=a.useState(!1);return a.useEffect(()=>{o(!0);const t=setTimeout(()=>{o(!1),setTimeout(l,300)},7e3);return()=>clearTimeout(t)},[l]),e.jsx("div",{role:"alert",className:`w-full max-w-sm p-4 rounded-lg shadow-2xl text-white transition-all duration-300 ease-in-out
        bg-slate-800/80 backdrop-blur-lg border ${Rt[s.type]}
        ${i?"opacity-100 translate-x-0":"opacity-0 translate-x-12"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:Bt[s.type]}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-100",children:s.message}),e.jsx("p",{className:"mt-1 text-xs text-slate-400",children:s.timestamp.toLocaleTimeString()})]}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsxs("button",{onClick:l,className:"inline-flex text-slate-400 rounded-md hover:text-slate-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-slate-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})]})})]})})},qt=()=>{const{notifications:s,removeNotification:l}=a.useContext(R);return e.jsx("div",{className:"fixed top-6 right-6 z-[100] w-full max-w-sm space-y-3","aria-live":"polite",children:s.map(i=>e.jsx(Ot,{notification:i,onClose:()=>l(i.id)},i.id))})},Ht=({currentUser:s,onLogout:l,activeView:i,setActiveView:o,hasPermission:t,children:n})=>{const[r,c]=a.useState(!1),{navigate:u}=a.useContext(xs),{hasNewSubmission:d,clearNewSubmission:h}=a.useContext(R),x=()=>{l(),u("/")},m=()=>{o("analytics"),h()};return e.jsxs("div",{className:"min-h-screen bg-slate-900 text-slate-200 flex",children:[e.jsx(Mt,{currentUser:s,activeView:i,setActiveView:o,onLogout:x,isSidebarOpen:r,setIsSidebarOpen:c,hasPermission:t}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"lg:hidden bg-slate-950/70 backdrop-blur-lg border-b border-slate-800 p-4 flex justify-between items-center sticky top-0 z-20",children:[e.jsxs("a",{href:"/",onClick:p=>{p.preventDefault(),u("/")},className:"flex items-center gap-2 text-lg font-bold text-slate-100",children:[e.jsx(ce,{className:"w-6 h-6 text-blue-400"}),e.jsx("span",{children:"Prevaledge"})]}),e.jsx("button",{onClick:()=>c(!r),className:"p-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-950 bg-grid-pattern",children:n})]}),e.jsx(qt,{}),d&&e.jsx(Et,{onViewClick:m,onClose:h})]})},Gt=({setActiveView:s})=>{const{tasks:l,projects:i,updateTask:o,addNotification:t}=a.useContext(R),{currentUser:n}=a.useContext(ne),[r,c]=a.useState(null),u=a.useMemo(()=>{if(!n)return[];const x={High:3,Medium:2,Low:1};return l.filter(m=>m.assignedTo===n.id&&m.status!=="Done").sort((m,p)=>{const j=x[p.priority]-x[m.priority];return j!==0?j:new Date(m.dueDate).getTime()-new Date(p.dueDate).getTime()})},[l,n]),d=async x=>{if(!r){c(x.id);try{await o(x.id,{status:"Done"}),t(`Task "${x.title}" marked as complete!`,"success")}catch{t("Failed to update task status.","error")}finally{c(null)}}},h={High:"bg-red-500",Medium:"bg-yellow-500",Low:"bg-blue-500"};return e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg",children:[e.jsxs("div",{className:"p-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"My Tasks"}),e.jsx("button",{onClick:()=>s("tasks"),className:"text-sm font-semibold text-blue-400 hover:text-blue-300 transition-colors",children:"View All →"})]}),e.jsx("div",{className:"px-6 pb-6",children:u.length>0?e.jsx("ul",{className:"space-y-3",children:u.slice(0,5).map(x=>{const m=new Date(x.dueDate)<new Date,p=i.find(S=>S.slug===x.relatedProject),j=r===x.id;return e.jsxs("li",{className:"flex items-center gap-3 p-3 bg-slate-800/50 rounded-md transition-colors hover:bg-slate-800",children:[e.jsx("div",{className:"flex-shrink-0",children:j?e.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"})}):e.jsx("input",{type:"checkbox",checked:!1,onChange:()=>d(x),className:"w-5 h-5 bg-slate-700 border-slate-600 rounded text-blue-500 focus:ring-blue-500/50 focus:ring-offset-slate-800","aria-label":`Mark task ${x.title} as complete`})}),e.jsxs("div",{className:"flex-grow overflow-hidden",onClick:()=>s("tasks"),children:[e.jsx("p",{className:"font-semibold text-white truncate cursor-pointer",children:x.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[p&&e.jsx("span",{className:"truncate",children:p.title}),p&&e.jsx("span",{children:"•"}),e.jsx("span",{className:`font-medium ${m?"text-red-400":""}`,children:new Date(x.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})]}),e.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 ${h[x.priority]}`,title:`Priority: ${x.priority}`})]},x.id)})}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx(je,{className:"w-12 h-12 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-400",children:"You have no open tasks. Great job!"})]})})]})},he=({label:s,value:l})=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-slate-400",children:s}),e.jsx("p",{className:"text-slate-200 mt-1",children:l||"N/A"})]}),Vt=({submission:s,onClose:l})=>{const i=a.useRef(null);return xe(i,!!s,l),s?e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in",onClick:l,role:"dialog","aria-modal":"true",children:e.jsxs("div",{ref:i,className:"relative bg-slate-900 w-full max-w-2xl h-[70vh] rounded-2xl shadow-2xl flex flex-col",onClick:o=>o.stopPropagation(),children:[e.jsxs("header",{className:"p-4 border-b border-slate-800 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Contact Submission"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["from ",s.name]})]}),e.jsx(k,{variant:"secondary",onClick:l,className:"!p-2",children:e.jsx($e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 p-4 bg-slate-800/50 rounded-lg",children:[e.jsx(he,{label:"Name",value:s.name}),e.jsx(he,{label:"Email",value:s.email}),e.jsx(he,{label:"Organization",value:s.organization}),e.jsx(he,{label:"Phone",value:s.phone}),e.jsx(he,{label:"Submitted On",value:new Date(s.submittedAt).toLocaleString()}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-slate-400",children:"AI Insight"}),s.isAnalyzing?e.jsx("p",{className:"text-slate-400 italic mt-1",children:"Analyzing..."}):e.jsx("p",{className:"text-blue-300 font-semibold mt-1",children:s.inquiryType||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Message"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg",children:e.jsx("p",{className:"whitespace-pre-wrap font-sans text-sm text-slate-200 leading-relaxed",children:s.message})})]})]})]})}):null},Ut=({briefing:s,isLoading:l})=>e.jsx("div",{className:"bg-blue-900/50 border border-blue-500/50 text-blue-200 px-6 py-4 rounded-lg relative mb-6 animate-fade-in",role:"alert",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(ce,{className:"w-8 h-8 flex-shrink-0 mt-1 text-blue-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-white",children:"Your Morning Briefing"}),l&&e.jsx("p",{className:"text-sm",children:"Analyzing agency data for critical insights..."}),s&&e.jsx("div",{className:"prose prose-sm prose-invert max-w-none text-blue-200 mt-2",children:us(s)}),!l&&!s&&e.jsx("p",{className:"text-sm",children:"Could not generate briefing at this time."})]})]})}),le=({title:s,value:l,icon:i})=>e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg p-6 flex flex-col text-center sm:flex-row sm:text-left items-center gap-6",children:[e.jsx("div",{className:"bg-slate-800 p-4 rounded-full flex-shrink-0",children:e.jsx(i,{className:"w-8 h-8 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:s}),e.jsx("p",{className:"text-3xl font-bold text-white",children:l})]})]}),Je=({setActiveView:s})=>{const{blogPosts:l,services:i,projects:o,testimonials:t,contactSubmissions:n,tasks:r,webinarSignups:c,jobOpenings:u,jobApplications:d}=a.useContext(R),{currentUser:h}=a.useContext(ne),[x,m]=a.useState(null),[p,j]=a.useState(null),[S,w]=a.useState(!0);a.useEffect(()=>{(async()=>{w(!0);try{const P=await Js(r,o,n);j(P)}catch(P){console.error("Failed to generate morning briefing:",P),j(null)}finally{w(!1)}})()},[r,o,n]);const g=a.useMemo(()=>r.filter(D=>new Date(D.dueDate)<new Date&&D.status!=="Done"),[r]);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Admin Dashboard"}),e.jsx(Ut,{briefing:p,isLoading:S}),g.length>0&&e.jsxs("div",{className:"bg-red-900/50 border border-red-500/50 text-red-200 px-4 py-3 rounded-lg relative mb-6 flex items-center justify-between gap-4 animate-fade-in",role:"alert",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"w-6 h-6 mr-3"}),e.jsxs("span",{className:"block sm:inline font-semibold",children:["Warning: You have ",g.length," overdue task",g.length>1?"s":"","."]})]}),e.jsx(k,{onClick:()=>s("tasks"),className:"!px-4 !py-1 !text-sm bg-red-600 hover:bg-red-500 shadow-md shadow-red-600/30",children:"View Tasks"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsx(le,{title:"Total Blog Posts",value:l.length,icon:fe}),e.jsx(le,{title:"Portfolio Projects",value:o.length,icon:vs}),e.jsx(le,{title:"Active Tasks",value:r.filter(D=>D.status!=="Done").length,icon:ye}),e.jsx(le,{title:"Job Openings",value:u.length,icon:ys}),e.jsx(le,{title:"Job Applications",value:d.length,icon:pe}),e.jsx(le,{title:"Total Services",value:i.length,icon:hs}),e.jsx(le,{title:"Contact Submissions",value:n.length,icon:Is}),e.jsx(le,{title:"Testimonials",value:t.length,icon:Oe})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Contact Submissions"}),n.length>0&&e.jsx("button",{onClick:()=>s("analytics"),className:"text-sm font-semibold text-blue-400 hover:text-blue-300 transition-colors",children:"View All →"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-slate-300",children:[e.jsx("thead",{className:"text-xs text-slate-400 uppercase bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"AI Insight"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Message"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:n.length>0?n.slice(0,5).map(D=>e.jsxs("tr",{className:"border-t border-slate-800 hover:bg-slate-800/30",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-white whitespace-nowrap",children:D.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.submittedAt.toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:D.isAnalyzing?e.jsx("span",{className:"text-xs text-slate-400 italic",children:"Analyzing..."}):e.jsx("span",{className:"text-xs font-semibold text-blue-400 bg-blue-900/50 px-2 py-1 rounded-full",children:D.inquiryType||"N/A"})}),e.jsx("td",{className:"px-6 py-4 max-w-sm",children:e.jsx("p",{className:"line-clamp-2",children:D.message})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>m(D),className:"text-blue-400 hover:text-blue-300","aria-label":`View submission from ${D.name}`,children:e.jsx(Re,{className:"w-5 h-5"})})})]},D.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-10 text-slate-500",children:"No recent submissions."})})})]})})]}),e.jsx(Gt,{setActiveView:s})]}),e.jsx(Vt,{submission:x,onClose:()=>m(null)})]})},zt=({onImageGenerated:s,promptSuggestion:l=""})=>{const[i,o]=a.useState(""),[t,n]=a.useState(!1),[r,c]=a.useState(""),[u,d]=a.useState(null);a.useEffect(()=>{l&&o(`A hero image for an article titled: ${l}`)},[l]);const h=async()=>{if(!i.trim()){c("Please enter a prompt to generate an image.");return}n(!0),c(""),d(null);try{const p=await Zs(i);d(p)}catch(p){c(p.message||"An unexpected error occurred during image generation.")}finally{n(!1)}},x=()=>{u&&(s(u),d(null),o(""))},m=()=>{d(null)};return e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 mt-4",children:[e.jsxs("h3",{className:"text-base font-semibold text-white flex items-center gap-2 mb-3",children:[e.jsx(de,{className:"w-5 h-5 text-purple-400"}),"AI Image Generation"]}),u?e.jsxs("div",{className:"space-y-4 animate-fade-in text-center",children:[e.jsx("img",{src:u,alt:"AI generated preview",className:"rounded-md max-w-full h-auto mx-auto shadow-lg"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(k,{type:"button",onClick:x,children:"Use This Image"}),e.jsx(k,{type:"button",variant:"secondary",onClick:m,children:"Try Again"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:i,onChange:p=>o(p.target.value),placeholder:"Describe the image you want to create...",className:"w-full bg-slate-800/50 border border-slate-700 rounded-md px-4 py-2 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-shadow text-sm",rows:2,disabled:t}),e.jsx(k,{type:"button",onClick:h,disabled:t,className:"w-full",children:t?"Generating...":"Generate Image"}),r&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:r})]})]})},oe=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Wt=({post:s,onSave:l,onCancel:i})=>{var I,$,Z,A,H,T;const{blogPosts:o}=a.useContext(R),[t,n]=a.useState({title:"",author:"",category:"",image:"",excerpt:"",content:"",metaTitle:"",metaDescription:"",focusKeyword:""}),[r,c]=a.useState(!1),[u,d]=a.useState(""),h=a.useRef(null),[x,m]=a.useState(!1),[p,j]=a.useState(!1),[S,w]=a.useState(!1),[g,D]=a.useState(!1),[P,N]=a.useState(""),O=a.useMemo(()=>[...new Set(o.map(C=>C.category))].sort(),[o]);a.useEffect(()=>{n(s?{title:s.title,author:s.author,category:s.category,image:s.image,excerpt:s.excerpt,content:s.content,metaTitle:s.metaTitle||"",metaDescription:s.metaDescription||"",focusKeyword:s.focusKeyword||""}:{title:"",author:"",category:O[0]||"",image:"https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=1470&auto=format&fit=crop",excerpt:"",content:"",metaTitle:"",metaDescription:"",focusKeyword:""})},[s,O]);const q=C=>{const{name:L,value:b}=C.target;L==="category"&&b==="__new__"?c(!0):(c(!1),n({...t,[L]:b}))},z=C=>{var b;const L=(b=C.target.files)==null?void 0:b[0];if(L){if(!L.type.startsWith("image/")){N("Please select an image file.");return}N("");const F=new FileReader;F.onloadend=()=>{n(G=>({...G,image:F.result}))},F.readAsDataURL(L)}},_=()=>{n(C=>({...C,image:""}))},Q=C=>{C.preventDefault();const L={...t,category:r?u.trim():t.category};if(!L.category){N("Category is required.");return}l(L,s)},J=async()=>{if(!t.title){N("Please enter a title to generate a draft.");return}N(""),m(!0);try{const C=await et(t.title);n(L=>({...L,content:C}))}catch{N("Failed to generate draft. Please try again.")}finally{m(!1)}},V=async()=>{if(!t.content){N("There is no content to improve.");return}N(""),j(!0);try{const C=await st(t.content);n(L=>({...L,content:C}))}catch{N("Failed to improve content. Please try again.")}finally{j(!1)}},W=async()=>{if(!t.content){N("Please add content before generating an excerpt.");return}N(""),w(!0);try{const C=await tt(t.content);n(L=>({...L,excerpt:C}))}catch{N("Failed to generate excerpt. Please try again.")}finally{w(!1)}},Y=async()=>{if(!t.content||!t.focusKeyword){N("Please provide content and a focus keyword to generate SEO metadata.");return}N(""),D(!0);try{const{metaTitle:C,metaDescription:L}=await at(t.content,t.focusKeyword);n(b=>({...b,metaTitle:C,metaDescription:L}))}catch{N("Failed to generate SEO data. Please try again.")}finally{D(!1)}};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit Blog Post":"Create New Blog Post"}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:f,children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:t.title,onChange:q,className:y,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"author",className:f,children:"Author"}),e.jsx("input",{type:"text",name:"author",id:"author",value:t.author,onChange:q,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:f,children:"Category"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{name:"category",id:"category",value:r?"__new__":t.category,onChange:q,className:y,children:[O.map(C=>e.jsx("option",{value:C,children:C},C)),e.jsx("option",{value:"__new__",children:"-- Create New Category --"})]}),r&&e.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),placeholder:"New category name",className:`${y} animate-fade-in`,required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",className:f,children:"Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"text",name:"image",id:"image",value:t.image,onChange:q,className:`${y} flex-grow`,placeholder:"Enter image URL or upload"}),e.jsx("input",{type:"file",ref:h,onChange:z,className:"hidden",accept:"image/*"}),e.jsxs(k,{type:"button",variant:"secondary",onClick:()=>{var C;return(C=h.current)==null?void 0:C.click()},children:[e.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Upload"]}),t.image&&e.jsx(k,{type:"button",variant:"secondary",onClick:_,className:"!px-3 !py-2 border-red-500/30 bg-red-900/30 text-red-400 hover:bg-red-900/60","aria-label":"Remove image",children:e.jsx(oe,{className:"w-5 h-5"})})]}),t.image&&e.jsx("div",{className:"mt-4 p-2 bg-slate-800/50 rounded-lg inline-block",children:e.jsx("img",{src:t.image,alt:"Image preview",className:"rounded-md max-h-48"})}),e.jsx(zt,{onImageGenerated:C=>n(L=>({...L,image:C})),promptSuggestion:t.title})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 my-4 space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-blue-400"}),"AI Content Tools"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:J,disabled:x||!t.title,children:x?"Generating...":"Generate Draft"}),e.jsx(k,{type:"button",variant:"secondary",onClick:V,disabled:p||!t.content,children:p?"Improving...":"Improve Content"}),e.jsx(k,{type:"button",variant:"secondary",onClick:W,disabled:S||!t.content,children:S?"Generating...":"Generate Excerpt"})]}),P&&e.jsx("p",{className:"text-red-400 text-xs text-center mt-2",children:P})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:f,children:"Content (Markdown supported)"}),e.jsx("textarea",{name:"content",id:"content",rows:15,value:t.content,onChange:q,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"excerpt",className:f,children:"Excerpt"}),e.jsx("textarea",{name:"excerpt",id:"excerpt",rows:3,value:t.excerpt,onChange:q,className:y,required:!0})]}),e.jsxs("fieldset",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 my-4 space-y-4",children:[e.jsxs("legend",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(Xs,{className:"w-5 h-5 text-green-400"}),"SEO Metadata"]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"focusKeyword",className:f,children:"Focus Keyword"}),e.jsx("input",{type:"text",name:"focusKeyword",id:"focusKeyword",value:t.focusKeyword,onChange:q,className:y})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metaTitle",className:f,children:"Meta Title"}),e.jsx("input",{type:"text",name:"metaTitle",id:"metaTitle",value:t.metaTitle,onChange:q,className:y,maxLength:70}),e.jsxs("p",{className:`text-xs mt-1 text-right ${(((I=t.metaTitle)==null?void 0:I.length)||0)>60?"text-red-400":((($=t.metaTitle)==null?void 0:$.length)||0)>50?"text-yellow-400":"text-slate-400"}`,children:[((Z=t.metaTitle)==null?void 0:Z.length)||0," / 60"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metaDescription",className:f,children:"Meta Description"}),e.jsx("textarea",{name:"metaDescription",id:"metaDescription",value:t.metaDescription,onChange:q,className:y,rows:2,maxLength:170}),e.jsxs("p",{className:`text-xs mt-1 text-right ${(((A=t.metaDescription)==null?void 0:A.length)||0)>160?"text-red-400":(((H=t.metaDescription)==null?void 0:H.length)||0)>140?"text-yellow-400":"text-slate-400"}`,children:[((T=t.metaDescription)==null?void 0:T.length)||0," / 160"]})]})]}),e.jsx(k,{type:"button",variant:"secondary",onClick:Y,disabled:g||!t.content||!t.focusKeyword,children:g?"Generating...":"Generate SEO Metadata"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Post"})]})]})]})};function se(s,l,i){const[o,t]=a.useState(!1),[n,r]=a.useState(null),[c,u]=a.useState(!1),[d,h]=a.useState(null);a.useEffect(()=>{if(d){const w=setTimeout(()=>h(null),4e3);return()=>clearTimeout(w)}},[d]);const x=a.useCallback(()=>{r(null),t(!0)},[]),m=a.useCallback(w=>{r(w),t(!0)},[]),p=a.useCallback(()=>{t(!1),r(null)},[]),j=a.useCallback(async(w,g)=>{const D=w.id||w.slug;if(!D){h({type:"error",message:`Cannot delete ${g}, missing identifier.`});return}if(window.confirm(`Are you sure you want to delete this ${g}? This action cannot be undone.`)){u(!0),h(null);try{await i(D),h({type:"success",message:`${g.charAt(0).toUpperCase()+g.slice(1)} deleted successfully!`})}catch{h({type:"error",message:`Failed to delete ${g}. Please try again.`})}finally{u(!1)}}},[i]),S=a.useCallback(async(w,g,D)=>{u(!0),h(null);const P=(g==null?void 0:g.id)||(g==null?void 0:g.slug);try{P?(await l(P,w),h({type:"success",message:`${D.charAt(0).toUpperCase()+D.slice(1)} updated successfully!`})):(await s(w),h({type:"success",message:`${D.charAt(0).toUpperCase()+D.slice(1)} created successfully!`})),p()}catch{h({type:"error",message:`Failed to save ${D}. Please try again.`})}finally{u(!1)}},[s,l,p]);return{isFormVisible:o,editingItem:n,isLoading:c,feedback:d,handleCreateNew:x,handleEdit:m,handleDelete:j,handleSave:S,handleCancel:p}}const Ts=({message:s,type:l,onClose:i})=>{const[o,t]=a.useState(!1);a.useEffect(()=>{t(!0)},[]);const n=l==="success",r=n?je:Be;return e.jsxs("div",{role:"alert",className:`fixed top-8 right-8 z-[100] flex items-center w-full max-w-xs p-4 rounded-lg shadow-lg text-white transition-all duration-300 ease-in-out
        ${n?"bg-green-600/80 backdrop-blur-sm border border-green-500/50":"bg-red-600/80 backdrop-blur-sm border border-red-500/50"}
        ${o?"opacity-100 translate-x-0":"opacity-0 translate-x-12"}`,children:[e.jsx("div",{className:`inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg ${n?"bg-green-800":"bg-red-800"}`,children:e.jsx(r,{className:"w-5 h-5"})}),e.jsx("div",{className:"ms-3 text-sm font-normal",children:s}),e.jsx("button",{type:"button",className:"ms-auto -mx-1.5 -my-1.5 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-white/20 inline-flex items-center justify-center h-8 w-8",onClick:i,"aria-label":"Close",children:e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})})})]})},Ps=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),As=({columns:s,data:l,onEdit:i,onDelete:o,getItemName:t})=>e.jsx("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg overflow-hidden animate-fade-in",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-slate-300",children:[e.jsx("thead",{className:"text-xs text-slate-400 uppercase bg-slate-800/50",children:e.jsxs("tr",{children:[s.map(n=>e.jsx("th",{scope:"col",className:"px-6 py-3",children:n.header},n.header)),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:l.map(n=>{const r=n.id||n.slug;return e.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/30",children:[s.map((c,u)=>{const d=c.accessor(n);return u===0?e.jsx("th",{scope:"row",className:`px-6 py-4 font-medium text-white whitespace-nowrap ${c.className||""}`,children:d},c.header):e.jsx("td",{className:`px-6 py-4 ${c.className||""}`,children:d},c.header)}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>i(n),className:"p-2 font-medium text-blue-400 hover:text-blue-300 rounded-md hover:bg-slate-700/50","aria-label":`Edit ${t(n)}`,children:e.jsx(Ps,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>o(n),className:"p-2 font-medium text-red-500 hover:text-red-400 rounded-md hover:bg-slate-700/50","aria-label":`Delete ${t(n)}`,children:e.jsx(oe,{className:"w-5 h-5"})})]})})]},r)})})]})})}),te=({title:s,itemName:l,data:i,columns:o,crudHooks:t,FormComponent:n,formItemPropName:r,itemTitleAccessor:c})=>{const{isFormVisible:u,editingItem:d,isLoading:h,feedback:x,handleCreateNew:m,handleEdit:p,handleDelete:j,handleSave:S,handleCancel:w}=t;return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 relative",children:[x&&e.jsx(Ts,{message:x.message,type:x.type,onClose:()=>{}}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:s}),!u&&e.jsxs(k,{onClick:m,children:[e.jsx(we,{className:"w-5 h-5 mr-2"}),"Create New ",l.charAt(0).toUpperCase()+l.slice(1)]})]}),e.jsxs("div",{className:"relative",children:[h&&e.jsx(me,{size:"md",className:"z-20"}),u?e.jsx(n,{[r]:d,onSave:(g,D)=>S(g,D,l),onCancel:w}):e.jsx(As,{columns:o,data:i,onEdit:p,onDelete:g=>j(g,l),getItemName:c})]})]})},Kt=()=>{const{blogPosts:s,addBlogPost:l,updateBlogPost:i,deleteBlogPost:o}=a.useContext(R),t=se(l,i,o),n=[{header:"Title",accessor:r=>r.title},{header:"Author",accessor:r=>r.author},{header:"Date",accessor:r=>r.date}];return e.jsx(te,{title:"Manage Blog Posts",itemName:"post",data:s,columns:n,crudHooks:t,FormComponent:Wt,formItemPropName:"post",itemTitleAccessor:r=>r.title})},_t=({project:s,onSave:l,onCancel:i})=>{const{clients:o}=a.useContext(R),[t,n]=a.useState({title:"",slug:"",category:"",description:"",image:"",url:"",clientId:"",showOnHomepage:!0,caseStudy:{challenge:"",solution:"",results:"",keyMetrics:[]}}),[r,c]=a.useState("");a.useEffect(()=>{s?(n({title:s.title,slug:s.slug,category:s.category,description:s.description,image:s.image,url:s.url||"",clientId:s.clientId||"",showOnHomepage:s.showOnHomepage??!0,caseStudy:s.caseStudy}),c(s.caseStudy.keyMetrics?s.caseStudy.keyMetrics.map(x=>`${x.value};${x.label}`).join(`
`):"")):(n({title:"",slug:"",category:"",description:"",image:"https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=1470&auto=format&fit=crop",url:"",clientId:"",showOnHomepage:!0,caseStudy:{challenge:"",solution:"",results:"",keyMetrics:[]}}),c(""))},[s]);const u=x=>{const{name:m,value:p,type:j}=x.target;if(j==="checkbox"){const{checked:S}=x.target;n({...t,[m]:S});return}m==="title"?n({...t,title:p,slug:lt(p)}):["challenge","solution","results"].includes(m)?n({...t,caseStudy:{...t.caseStudy,[m]:p}}):n({...t,[m]:p})},d=x=>{c(x.target.value)},h=x=>{x.preventDefault();const m=r.split(`
`).map(j=>j.split(";")).filter(j=>j.length===2&&j[0].trim()&&j[1].trim()).map(j=>({value:j[0].trim(),label:j[1].trim()})),p={...t,caseStudy:{...t.caseStudy,keyMetrics:m}};l(p,s)};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit Project":"Create New Project"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:f,children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:t.title,onChange:u,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"slug",className:f,children:"URL Slug (auto-generated)"}),e.jsx("input",{type:"text",name:"slug",id:"slug",value:t.slug,onChange:u,className:`${y} bg-slate-800`,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:f,children:"Category"}),e.jsx("input",{type:"text",name:"category",id:"category",value:t.category,onChange:u,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clientId",className:f,children:"Assign to Client"}),e.jsxs("select",{name:"clientId",id:"clientId",value:t.clientId,onChange:u,className:y,children:[e.jsx("option",{value:"",children:"No Client"}),o.map(x=>e.jsxs("option",{value:x.id,children:[x.name," (",x.company,")"]},x.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",className:f,children:"Image URL"}),e.jsx("input",{type:"url",name:"image",id:"image",value:t.image,onChange:u,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:f,children:"Project URL (Optional)"}),e.jsx("input",{type:"url",name:"url",id:"url",value:t.url,onChange:u,className:y})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:f,children:"Short Description (for portfolio card)"}),e.jsx("textarea",{name:"description",id:"description",rows:2,value:t.description,onChange:u,className:y,required:!0})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"showOnHomepage",name:"showOnHomepage",type:"checkbox",checked:t.showOnHomepage,onChange:u,className:"h-4 w-4 rounded border-slate-600 bg-slate-800 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"showOnHomepage",className:"ml-3 block text-sm font-medium text-slate-300",children:"Show on homepage portfolio"})]})}),e.jsxs("fieldset",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 my-4 space-y-4",children:[e.jsx("legend",{className:"text-lg font-semibold text-white px-2",children:"Case Study Content"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"challenge",className:f,children:"The Challenge"}),e.jsx("textarea",{name:"challenge",id:"challenge",rows:3,value:t.caseStudy.challenge,onChange:u,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"solution",className:f,children:"Our Solution"}),e.jsx("textarea",{name:"solution",id:"solution",rows:4,value:t.caseStudy.solution,onChange:u,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"results",className:f,children:"The Results"}),e.jsx("textarea",{name:"results",id:"results",rows:3,value:t.caseStudy.results,onChange:u,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metrics",className:f,children:"Key Metrics (one per line, format: value;label)"}),e.jsx("textarea",{name:"metrics",id:"metrics",rows:4,value:r,onChange:d,className:y,placeholder:`e.g., +200%;Organic Traffic
35%;Conversion Rate Lift`})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Project"})]})]})]})},Yt=()=>{const{projects:s,addProject:l,updateProject:i,deleteProject:o}=a.useContext(R),t=se(l,i,o),n=[{header:"Title",accessor:r=>r.title},{header:"Category",accessor:r=>r.category}];return e.jsx(te,{title:"Manage Projects",itemName:"project",data:s,columns:n,crudHooks:t,FormComponent:_t,formItemPropName:"project",itemTitleAccessor:r=>r.title})},Qt=({service:s,onSave:l,onCancel:i})=>{const[o,t]=a.useState({title:"",description:"",detailedDescription:"",iconName:Pe[0]||""}),[n,r]=a.useState("");a.useEffect(()=>{s?(t({title:s.title,description:s.description,detailedDescription:s.detailedDescription,iconName:s.iconName}),r(s.keyOfferings.join(`
`))):(t({title:"",description:"",detailedDescription:"",iconName:Pe[0]||""}),r(""))},[s]);const c=h=>{t({...o,[h.target.name]:h.target.value})},u=h=>{r(h.target.value)},d=h=>{h.preventDefault();const x={...o,keyOfferings:n.split(`
`).map(m=>m.trim()).filter(Boolean)};l(x,s)};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?`Edit Service: ${s.title}`:"Create New Service"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:f,children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:o.title,onChange:c,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"iconName",className:f,children:"Icon"}),e.jsx("select",{id:"iconName",name:"iconName",value:o.iconName,onChange:c,className:y,required:!0,children:Pe.map(h=>e.jsx("option",{value:h,children:h.replace("Icon","")},h))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:f,children:"Short Description (for service card)"}),e.jsx("textarea",{name:"description",id:"description",rows:2,value:o.description,onChange:c,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"detailedDescription",className:f,children:"Detailed Description (for modal)"}),e.jsx("textarea",{name:"detailedDescription",id:"detailedDescription",rows:4,value:o.detailedDescription,onChange:c,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"keyOfferings",className:f,children:"Key Offerings (one per line)"}),e.jsx("textarea",{name:"keyOfferings",id:"keyOfferings",rows:5,value:n,onChange:u,className:y,required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Service"})]})]})]})},Jt=()=>{const{services:s,addService:l,updateService:i,deleteService:o}=a.useContext(R),t=se(l,i,o),n=[{header:"Service Title",accessor:r=>r.title},{header:"Description",accessor:r=>r.description,className:"max-w-md truncate"}];return e.jsx(te,{title:"Manage Services",itemName:"service",data:s,columns:n,crudHooks:t,FormComponent:Qt,formItemPropName:"service",itemTitleAccessor:r=>r.title})},Zt=[{group:"Overview",permissions:[{id:"analytics",label:"Analytics"}]},{group:"AI & Strategy",permissions:[{id:"strategist",label:"The Strategist (Text)"},{id:"liveStrategist",label:"Live Strategist (Voice)"},{id:"horizonScanner",label:"Horizon Scanner"}]},{group:"Operations",permissions:[{id:"tasks",label:"Task Management"},{id:"clients",label:"Client Management"},{id:"invoicing",label:"Invoice Generator"},{id:"quotations",label:"Quote Generator"},{id:"documentHistory",label:"Document History"}]},{group:"Content & Site",permissions:[{id:"blog",label:"Manage Blog"},{id:"projects",label:"Manage Projects"},{id:"services",label:"Manage Services"},{id:"pricing",label:"Manage Pricing"},{id:"testimonials",label:"Manage Testimonials"},{id:"socials",label:"Manage Socials"}]}],Xt=({user:s,currentUser:l,onSave:i,onCancel:o})=>{const[t,n]=a.useState({name:"",title:"",bio:"",email:"",role:"Editor",permissions:[]}),[r,c]=a.useState(""),[u,d]=a.useState(""),[h,x]=a.useState("");a.useEffect(()=>{s?(n({name:s.name,title:s.title,bio:s.bio,email:s.email,role:s.role,permissions:s.permissions||[]}),c(""),d("")):n({name:"",title:"",bio:"",email:"",role:"Editor",permissions:[]})},[s]);const m=w=>{n({...t,[w.target.name]:w.target.value})},p=(w,g)=>{n(D=>{const P=D.permissions||[];return g?{...D,permissions:[...P,w]}:{...D,permissions:P.filter(N=>N!==w)}})},j=w=>{if(w.preventDefault(),x(""),r!==u){x("Passwords do not match.");return}if(!s&&!r){x("Password is required for new users.");return}const g={...t};r&&(g.password=r),i(g,s)},S=(l==null?void 0:l.role)==="Admin"&&t.role==="Editor";return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit User":"Create New User"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:f,children:"Full Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:t.name,onChange:m,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:f,children:"Job Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:t.title,onChange:m,className:y,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:f,children:"Biography"}),e.jsx("textarea",{name:"bio",id:"bio",rows:3,value:t.bio,onChange:m,className:y,required:!0})]}),e.jsxs("fieldset",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 my-4 space-y-4",children:[e.jsx("legend",{className:"text-lg font-semibold text-white px-2",children:"Account Credentials & Role"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:f,children:"Email Address (for login)"}),e.jsx("input",{type:"email",name:"email",id:"email",value:t.email,onChange:m,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:f,children:"Role"}),e.jsxs("select",{name:"role",id:"role",value:t.role,onChange:m,className:y,required:!0,disabled:(l==null?void 0:l.id)===(s==null?void 0:s.id),children:[e.jsx("option",{value:"Editor",children:"Editor"}),e.jsx("option",{value:"Admin",children:"Admin"})]}),(l==null?void 0:l.id)===(s==null?void 0:s.id)&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"You cannot change your own role."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:f,children:"Password"}),e.jsx("input",{type:"password",id:"password",value:r,onChange:w=>c(w.target.value),className:y,placeholder:s?"Leave blank to keep unchanged":"Required",autoComplete:"new-password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:f,children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:u,onChange:w=>d(w.target.value),className:y,placeholder:"Confirm new password"})]})]})]}),S&&e.jsxs("fieldset",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 my-4 space-y-4",children:[e.jsx("legend",{className:"text-lg font-semibold text-white px-2",children:"Permissions"}),e.jsx("p",{className:"text-sm text-slate-400 -mt-2 px-2",children:"Select which sections this editor can access."}),Zt.map(w=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-300 mb-2",children:w.group}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 pl-2",children:w.permissions.map(g=>{var D;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:`perm-${g.id}`,type:"checkbox",checked:(D=t.permissions)==null?void 0:D.includes(g.id),onChange:P=>p(g.id,P.target.checked),className:"h-4 w-4 rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:`perm-${g.id}`,className:"ml-3 block text-sm font-medium text-slate-300",children:g.label})]},g.id)})})]},w.group))]}),h&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:h}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:o,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create User"})]})]})]})},ea=()=>{const{users:s,addUser:l,updateUser:i,deleteUser:o}=a.useContext(R),{currentUser:t}=a.useContext(ne),n=se(l,i,o),r=u=>e.jsx(Xt,{...u,currentUser:t}),c=[{header:"Name",accessor:u=>u.name},{header:"Title",accessor:u=>u.title},{header:"Email",accessor:u=>u.email},{header:"Role",accessor:u=>u.role}];return e.jsx(te,{title:"Users & Permissions",itemName:"user",data:s,columns:c,crudHooks:n,FormComponent:r,formItemPropName:"user",itemTitleAccessor:u=>u.name})},sa=({client:s,onSave:l,onCancel:i})=>{const[o,t]=a.useState({name:"",company:"",email:""});a.useEffect(()=>{t(s?{name:s.name,company:s.company,email:s.email}:{name:"",company:"",email:""})},[s]);const n=c=>{t({...o,[c.target.name]:c.target.value})},r=c=>{c.preventDefault(),l(o,s)};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit Client":"Create New Client"}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:f,children:"Contact Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:n,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:f,children:"Company Name"}),e.jsx("input",{type:"text",name:"company",id:"company",value:o.company,onChange:n,className:y,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:f,children:"Contact Email"}),e.jsx("input",{type:"email",name:"email",id:"email",value:o.email,onChange:n,className:y,required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Client"})]})]})]})},qe=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),ta=()=>{const{clients:s,addClient:l,updateClient:i,deleteClient:o}=a.useContext(R),[t,n]=a.useState(null),r=se(l,i,o),c=d=>{const h=`${window.location.origin}/portal/${d}`;navigator.clipboard.writeText(h),n(d),setTimeout(()=>n(null),2e3)},u=[{header:"Name",accessor:d=>d.name},{header:"Company",accessor:d=>d.company},{header:"Email",accessor:d=>d.email},{header:"Portal Link",accessor:d=>e.jsxs("button",{onClick:()=>c(d.id),className:"flex items-center gap-2 text-xs font-semibold text-blue-400 hover:text-blue-300 bg-blue-900/50 hover:bg-blue-900/80 px-2 py-1 rounded-full transition-colors",children:[t===d.id?e.jsx(ve,{className:"w-4 h-4 text-green-400"}):e.jsx(qe,{className:"w-4 h-4"}),t===d.id?"Copied!":"Copy Link"]})}];return e.jsx(te,{title:"Manage Clients",itemName:"client",data:s,columns:u,crudHooks:r,FormComponent:sa,formItemPropName:"client",itemTitleAccessor:d=>d.name})},aa=({testimonial:s,onSave:l,onCancel:i})=>{const[o,t]=a.useState({quote:"",name:"",title:"",company:""});a.useEffect(()=>{t(s?{quote:s.quote,name:s.name,title:s.title,company:s.company}:{quote:"",name:"",title:"",company:""})},[s]);const n=c=>{t({...o,[c.target.name]:c.target.value})},r=c=>{c.preventDefault(),l(o,s)};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit Testimonial":"Create New Testimonial"}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"quote",className:f,children:"Quote"}),e.jsx("textarea",{name:"quote",id:"quote",rows:4,value:o.quote,onChange:n,className:y,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:f,children:"Author's Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:n,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:f,children:"Author's Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:o.title,onChange:n,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:f,children:"Company"}),e.jsx("input",{type:"text",name:"company",id:"company",value:o.company,onChange:n,className:y,required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Testimonial"})]})]})]})},la=()=>{const{testimonials:s,addTestimonial:l,updateTestimonial:i,deleteTestimonial:o}=a.useContext(R),t=se(l,i,o),n=[{header:"Quote Excerpt",accessor:r=>`"${r.quote}"`,className:"max-w-sm truncate"},{header:"Author",accessor:r=>r.name},{header:"Company",accessor:r=>r.company}];return e.jsx(te,{title:"Manage Testimonials",itemName:"testimonial",data:s,columns:n,crudHooks:t,FormComponent:aa,formItemPropName:"testimonial",itemTitleAccessor:r=>`testimonial by ${r.name}`})};bt.register(ft,Nt,vt,yt,wt,Ct);const na={strategyGenerator:"Strategy Generator",websiteAnalyzer:"Website Analyzer",adCopyGenerator:"Ad Copy Generator",blogIdeaGenerator:"Blog Idea Generator",keywordClusterGenerator:"Keyword Cluster Gen.",socialPostGenerator:"Social Post Generator",roiCalculator:"ROI Calculator",competitorSnapshot:"Competitor Snapshot",seoContentGrader:"SEO Content Grader",nicheNavigator:"Niche Navigator",articleDrafter:"Article Drafter",clientProspectAnalyzer:"Prospect Analyzer",contentBriefGenerator:"Content Brief Gen.",leadGenNurture:"Lead Gen & Nurture"},ra=({aiToolUsage:s,contactSubmissions:l})=>{const i=l.reduce((d,h)=>{const x=h.inquiryType||"General Inquiry";return d[x]=(d[x]||0)+1,d},{}),o=Object.entries(i).sort(([,d],[,h])=>Number(h)-Number(d)).slice(0,5),t=o.length>0?o[0][1]:1,n=s.reduce((d,h)=>(d[h.toolName]=(d[h.toolName]||0)+1,d),{}),r=Object.entries(n).sort(([,d],[,h])=>Number(h)-Number(d)).slice(0,7),c={labels:r.map(([d])=>na[d]),datasets:[{label:"Tool Usage",data:r.map(([,d])=>d),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{ticks:{color:"#94a3b8"}},x:{ticks:{color:"#94a3b8"}}}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 bg-slate-900/70 border border-slate-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Most Used AI Tools"}),e.jsx("div",{className:"h-96",children:e.jsx(jt,{options:u,data:c})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-slate-900/70 border border-slate-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Inquiry Types Breakdown"}),e.jsx("div",{className:"space-y-4",children:o.length>0?o.map(([d,h])=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-40 text-sm text-slate-300 truncate",children:d}),e.jsx("div",{className:"flex-1 bg-slate-800 rounded-full h-4",children:e.jsx("div",{className:"bg-blue-500 h-4 rounded-full",style:{width:`${h/t*100}%`}})}),e.jsx("div",{className:"w-12 text-right text-sm font-semibold",children:h})]},d)):e.jsx("p",{className:"text-center text-slate-500 py-10",children:"No submission data yet."})})]})]})},ia=()=>{const{aiToolUsage:s,contactSubmissions:l}=a.useContext(R);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Analytics & Insights"}),e.jsx(ra,{aiToolUsage:s,contactSubmissions:l})]})},oa=({plan:s,onSave:l,onCancel:i})=>{const[o,t]=a.useState({name:"",price:"",priceDetail:"",description:"",features:"",isPopular:!1});a.useEffect(()=>{t(s?{name:s.name,price:s.price,priceDetail:s.priceDetail||"",description:s.description,features:s.features.join(`
`),isPopular:s.isPopular||!1}:{name:"",price:"",priceDetail:"",description:"",features:"",isPopular:!1})},[s]);const n=c=>{const{name:u,value:d,type:h}=c.target;if(h==="checkbox"){const{checked:x}=c.target;t({...o,[u]:x})}else t({...o,[u]:d})},r=c=>{c.preventDefault();const u={...o,features:o.features.split(`
`).map(d=>d.trim()).filter(Boolean)};l(u)};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 mt-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit Pricing Plan":"Create New Pricing Plan"}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:f,children:"Plan Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:n,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:f,children:"Price"}),e.jsx("input",{type:"text",name:"price",id:"price",value:o.price,onChange:n,className:y,required:!0,placeholder:"e.g., $499 or Custom"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priceDetail",className:f,children:"Price Detail (Optional)"}),e.jsx("input",{type:"text",name:"priceDetail",id:"priceDetail",value:o.priceDetail,onChange:n,className:y,placeholder:"e.g., /mo or one-time"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:f,children:"Description"}),e.jsx("textarea",{name:"description",id:"description",rows:2,value:o.description,onChange:n,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"features",className:f,children:"Features (one per line)"}),e.jsx("textarea",{name:"features",id:"features",rows:5,value:o.features,onChange:n,className:y,required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"isPopular",name:"isPopular",type:"checkbox",checked:o.isPopular,onChange:n,className:"h-4 w-4 rounded border-slate-600 bg-slate-800 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"isPopular",className:"ml-3 block text-sm font-medium text-slate-300",children:'Mark as "Most Popular"'})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Plan"})]})]})]})},ca=()=>{const{servicePricingData:s,addPricingPlan:l,updatePricingPlan:i,deletePricingPlan:o,updateServiceDiscount:t}=a.useContext(R),[n,r]=a.useState(!1),[c,u]=a.useState(null),[d,h]=a.useState(null),[x,m]=a.useState(!1),[p,j]=a.useState(null),[S,w]=a.useState(!1),[g,D]=a.useState(null),[P,N]=a.useState({percentage:"",endDate:""});a.useEffect(()=>{if(p){const I=setTimeout(()=>j(null),4e3);return()=>clearTimeout(I)}},[p]);const O=I=>{u(null),h(I),r(!0)},q=(I,$)=>{u(I),h($),r(!0)},z=()=>{r(!1),u(null),h(null)},_=async I=>{if(d){m(!0),j(null);try{c?(await i(d,c.id,I),j({type:"success",message:"Plan updated successfully!"})):(await l(d,I),j({type:"success",message:"Plan created successfully!"})),z()}catch{j({type:"error",message:"Failed to save plan. Please try again."})}finally{m(!1)}}},Q=async(I,$)=>{if(window.confirm(`Are you sure you want to delete the "${I.name}" plan? This action cannot be undone.`)){m(!0),j(null);try{await o($,I.id),j({type:"success",message:"Plan deleted successfully!"})}catch{j({type:"error",message:"Failed to delete plan. Please try again."})}finally{m(!1)}}},J=I=>{var $;D(I),N({percentage:(($=I.discountPercentage)==null?void 0:$.toString())||"",endDate:I.discountEndDate||""}),w(!0)},V=async()=>{if(g){m(!0);try{await t(g.id,{discountPercentage:P.percentage?parseFloat(P.percentage):null,discountEndDate:P.endDate||null}),j({type:"success",message:"Discount updated successfully!"})}catch{j({type:"error",message:"Failed to update discount."})}finally{m(!1),W()}}},W=()=>{w(!1),D(null)},Y=[{header:"Plan Name",accessor:I=>I.name},{header:"Price",accessor:I=>`${I.price} ${I.priceDetail||""}`},{header:"Popular",accessor:I=>I.isPopular?e.jsx("span",{className:"text-xs font-bold text-blue-400 bg-blue-900/50 px-2 py-1 rounded-full",children:"Yes"}):null}];return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 relative",children:[p&&e.jsx(Ts,{message:p.message,type:p.type,onClose:()=>j(null)}),e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manage Plans & Pricing"})}),x&&e.jsx(me,{size:"md"}),n?e.jsx(oa,{plan:c,onSave:_,onCancel:z}):e.jsx("div",{className:"space-y-10 animate-fade-in",children:s.map(I=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-white flex items-center gap-3",children:[e.jsx(I.icon,{className:"w-6 h-6 text-blue-400"}),I.serviceTitle]}),e.jsx("button",{onClick:()=>J(I),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(Ps,{className:"w-4 h-4"})}),I.discountPercentage&&e.jsxs("span",{className:"text-xs font-bold text-red-400 bg-red-900/50 px-2 py-1 rounded-full",children:[I.discountPercentage,"% OFF"]})]}),e.jsxs(k,{onClick:()=>O(I.id),variant:"secondary",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Add New Plan"]})]}),e.jsx(As,{columns:Y,data:I.plans,onEdit:$=>q($,I.id),onDelete:$=>Q($,I.id),getItemName:$=>$.name})]},I.id))}),S&&g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:W,children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-6 w-full max-w-md",onClick:I=>I.stopPropagation(),children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Edit Discount for ",g.serviceTitle]}),e.jsxs("form",{onSubmit:I=>{I.preventDefault(),V()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"percentage",className:f,children:"Discount Percentage (%)"}),e.jsx("input",{type:"number",id:"percentage",value:P.percentage,onChange:I=>N({...P,percentage:I.target.value}),className:y,placeholder:"e.g., 25"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:f,children:"End Date (Optional)"}),e.jsx("input",{type:"date",id:"endDate",value:P.endDate,onChange:I=>N({...P,endDate:I.target.value}),className:y})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:W,children:"Cancel"}),e.jsx(k,{type:"submit",children:"Save Discount"})]})]})]})})]})},da=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),e.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),e.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),e.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125s.148-.836.437-1.125c.29-.289.438-.652.438-1.125s-.148-.836-.437-1.125c-.29-.289-.438-.652-.438-1.125s.148-.836.437-1.125c.29-.289.438-.652.438-1.125s-.148-.836-.437-1.125c-.29-.289-.438-.652-.438-1.125C13.648 2.746 12.926 2 12 2z"})]}),ma=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),xa=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M3 5v14"}),e.jsx("path",{d:"M8 5v14"}),e.jsx("path",{d:"M12 5v14"}),e.jsx("path",{d:"M17 5v14"}),e.jsx("path",{d:"M21 5v14"})]}),Fs=({isOpen:s,onClose:l,documentData:i,documentHtml:o})=>{const t=a.useRef(null);xe(t,s,l);const[n,r]=a.useState({to:"",from:"",subject:"",body:""}),[c,u]=a.useState("idle");a.useEffect(()=>{if(i){const{clientDetails:x,companyDetails:m,documentType:p,documentNumber:j,currency:S,total:w}=i,g=`${p} #${j} from ${m.name}`,D=`Hi ${x.name||"there"},

Please find your ${p.toLowerCase()} #${j} attached for a total of ${S}${w.toFixed(2)}.

Thank you for your business!

Best regards,
The team at ${m.name}`;r({to:x.email,from:m.email,subject:g,body:D}),u("idle")}},[i,s]);const d=x=>{r(m=>({...m,[x.target.name]:x.target.value}))},h=async()=>{u("sending");try{await nt.sendDocumentEmail({...n,documentHtml:o}),u("success")}catch{u("error")}};return s?e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in",onClick:l,role:"dialog","aria-modal":"true","aria-labelledby":"email-modal-title",children:e.jsxs("div",{ref:t,className:"relative max-w-2xl w-11/12 bg-slate-900 border border-blue-500/50 rounded-2xl shadow-2xl overflow-hidden",onClick:x=>x.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-slate-800",children:e.jsxs("h2",{id:"email-modal-title",className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ce,{className:"w-6 h-6 text-blue-400"}),"Email ",i.documentType]})}),e.jsx("div",{className:"p-6",children:c==="success"?e.jsxs("div",{className:"text-center py-12 animate-fade-in",children:[e.jsx(je,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Email Sent!"}),e.jsxs("p",{className:"text-slate-400 mt-2",children:["A simulated email has been successfully sent to ",n.to,"."]}),e.jsx(k,{onClick:l,className:"mt-6",children:"Close"})]}):e.jsxs("div",{className:"relative",children:[c==="sending"&&e.jsx(me,{}),e.jsxs("form",{className:`space-y-4 ${c==="sending"?"opacity-50":""}`,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"from",className:"block text-sm font-medium text-slate-300 mb-1",children:"From"}),e.jsx("input",{type:"email",name:"from",id:"from",value:n.from,onChange:d,className:"w-full bg-slate-800/50 border border-slate-700 rounded-md px-3 py-2 text-white",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"to",className:"block text-sm font-medium text-slate-300 mb-1",children:"To"}),e.jsx("input",{type:"email",name:"to",id:"to",value:n.to,onChange:d,className:"w-full bg-slate-800/50 border border-slate-700 rounded-md px-3 py-2 text-white",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-slate-300 mb-1",children:"Subject"}),e.jsx("input",{type:"text",name:"subject",id:"subject",value:n.subject,onChange:d,className:"w-full bg-slate-800/50 border border-slate-700 rounded-md px-3 py-2 text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"body",className:"block text-sm font-medium text-slate-300 mb-1",children:"Body"}),e.jsx("textarea",{name:"body",id:"body",rows:8,value:n.body,onChange:d,className:"w-full bg-slate-800/50 border border-slate-700 rounded-md px-3 py-2 text-white",required:!0})]}),c==="error"&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:"Failed to send email. Please try again."})]})]})}),c!=="success"&&e.jsxs("div",{className:"p-6 bg-slate-950/50 border-t border-slate-800 flex justify-end gap-4",children:[e.jsx(k,{variant:"secondary",onClick:l,disabled:c==="sending",children:"Cancel"}),e.jsx(k,{onClick:h,disabled:c==="sending",children:c==="sending"?"Sending...":"Send Email"})]})]})}):null},ha=({isOpen:s,onClose:l,onGenerate:i})=>{const o=a.useRef(null);xe(o,s,l);const{servicePricingData:t}=a.useContext(R),[n,r]=a.useState(""),[c,u]=a.useState(!1),[d,h]=a.useState(""),x=async()=>{if(!n.trim()){h("Please enter a description of the items you want to quote.");return}h(""),u(!0);try{const m=await rt(n,t);i(m)}catch(m){h(m.message||"An unexpected error occurred.")}finally{u(!1)}};return s?e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in",onClick:l,role:"dialog","aria-modal":"true","aria-labelledby":"ai-assistant-title",children:e.jsxs("div",{ref:o,className:"relative max-w-xl w-11/12 bg-slate-900 border border-purple-500/50 rounded-2xl shadow-2xl overflow-hidden",onClick:m=>m.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-slate-800",children:e.jsxs("h2",{id:"ai-assistant-title",className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(de,{className:"w-6 h-6 text-purple-400"}),"AI Quote Assistant"]})}),e.jsxs("div",{className:"p-6 relative",children:[c&&e.jsx(me,{}),e.jsxs("div",{className:`space-y-4 ${c?"opacity-50":""}`,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ai-prompt",className:"block text-sm font-medium text-slate-300 mb-2",children:"Describe the services you want to quote:"}),e.jsx("textarea",{id:"ai-prompt",value:n,onChange:m=>r(m.target.value),placeholder:"e.g., 'A standard business website, plus the Growth SEO package for 6 months, and an initial automation audit.'",className:"w-full h-32 bg-slate-800/50 border border-slate-700 rounded-md px-3 py-2 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:c})]}),d&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:d})]})]}),e.jsxs("div",{className:"p-6 bg-slate-950/50 border-t border-slate-800 flex justify-end gap-4",children:[e.jsx(k,{variant:"secondary",onClick:l,disabled:c,children:"Cancel"}),e.jsx(k,{onClick:x,disabled:c,className:"bg-purple-600 hover:bg-purple-500 shadow-purple-600/30 hover:shadow-purple-500/50 focus:ring-purple-400/50",children:c?"Generating...":"Generate Items"})]})]})}):null},ua=[{symbol:"$",name:"USD - United States Dollar"},{symbol:"€",name:"EUR - Euro"},{symbol:"£",name:"GBP - British Pound"},{symbol:"¥",name:"JPY - Japanese Yen"},{symbol:"A$",name:"AUD - Australian Dollar"},{symbol:"C$",name:"CAD - Canadian Dollar"},{symbol:"CHF",name:"CHF - Swiss Franc"},{symbol:"¥",name:"CNY - Chinese Yuan"},{symbol:"₹",name:"INR - Indian Rupee"},{symbol:"R$",name:"BRL - Brazilian Real"},{symbol:"₽",name:"RUB - Russian Ruble"},{symbol:"₩",name:"KRW - South Korean Won"},{symbol:"S$",name:"SGD - Singapore Dollar"},{symbol:"kr",name:"NOK - Norwegian Krone"},{symbol:"$",name:"MXN - Mexican Peso"},{symbol:"HK$",name:"HKD - Hong Kong Dollar"},{symbol:"NZ$",name:"NZD - New Zealand Dollar"},{symbol:"kr",name:"SEK - Swedish Krona"},{symbol:"R",name:"ZAR - South African Rand"},{symbol:"₺",name:"TRY - Turkish Lira"},{symbol:"zł",name:"PLN - Polish Złoty"},{symbol:"฿",name:"THB - Thai Baht"},{symbol:"Rp",name:"IDR - Indonesian Rupiah"},{symbol:"Ft",name:"HUF - Hungarian Forint"},{symbol:"Kč",name:"CZK - Czech Koruna"},{symbol:"₪",name:"ILS - Israeli New Shekel"},{symbol:"$",name:"CLP - Chilean Peso"},{symbol:"₱",name:"PHP - Philippine Peso"},{symbol:"د.إ",name:"AED - UAE Dirham"},{symbol:"$",name:"COP - Colombian Peso"},{symbol:"﷼",name:"SAR - Saudi Riyal"},{symbol:"RM",name:"MYR - Malaysian Ringgit"}],ie=({title:s,children:l,defaultOpen:i=!0})=>{const[o,t]=a.useState(i);return e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg",children:[e.jsxs("button",{className:"w-full p-4 flex justify-between items-center text-left",onClick:()=>t(!o),children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:s}),e.jsx("svg",{className:`w-5 h-5 text-slate-400 transition-transform ${o?"rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),o&&e.jsx("div",{className:"p-4 border-t border-slate-800 space-y-4",children:l})]})},Ls=({documentType:s,documentNumberPrefix:l,title:i,initialNotes:o})=>{const{clients:t,addDocumentToHistory:n}=a.useContext(R),r=a.useMemo(()=>crypto.randomUUID(),[]),[c,u]=a.useState({name:"Prevaledge",address:`C 1 To 26 Vardhman Grandeur, Andheri West
Mumbai, India 400058`,email:"info@prevaledge.com"}),[d,h]=a.useState(null),[x,m]=a.useState("#3B82F6"),[p,j]=a.useState("$"),[S,w]=a.useState("unpaid"),[g,D]=a.useState(!0),[P,N]=a.useState(""),[O,q]=a.useState(""),[z,_]=a.useState(!0),[Q,J]=a.useState(new Date().toISOString().split("T")[0]),[V,W]=a.useState(""),[Y,I]=a.useState({name:"",company:"",address:"",email:""}),[$,Z]=a.useState(""),[A,H]=a.useState([{id:1,description:"",quantity:"1",price:"0.00"}]),[T,C]=a.useState(o),[L,b]=a.useState("0"),[F,G]=a.useState("Percentage"),[ae,Bs]=a.useState("0"),[Rs,Ge]=a.useState(!1),[ke,Os]=a.useState(null),[Ve,Se]=a.useState(!1),[qs,De]=a.useState(!1),Ue=a.useRef(null);a.useEffect(()=>{if(q((()=>{const M=new Date().getFullYear(),E=`doc_counter_${s}${z?`_${M}`:""}`;let K=parseInt(localStorage.getItem(E)||"0",10);K++,localStorage.setItem(E,K.toString());const ee=K.toString().padStart(3,"0");return z?`${l}-${M}-${ee}`:`${l}-${ee}`})()),s==="Invoice"&&!V){const M=new Date,E=new Date;E.setDate(M.getDate()+30),W(E.toISOString().split("T")[0])}},[s,l,z]);const re=(v,M)=>{const{name:E,value:K}=v.target;M==="company"?u(ee=>({...ee,[E]:K})):I(ee=>({...ee,[E]:K}))},Hs=v=>{Z(v);const M=t.find(E=>E.id===v);I(M?{name:M.name,company:M.company,email:M.email,address:""}:{name:"",company:"",address:"",email:""})},Ie=(v,M,E)=>{const K=[...A];K[v]={...K[v],[M]:E},H(K)},Gs=v=>{var E;const M=(E=v.target.files)==null?void 0:E[0];if(M){const K=new FileReader;K.onloadend=()=>h(K.result),K.readAsDataURL(M)}},Vs=()=>H([...A,{id:Date.now(),description:"",quantity:"1",price:"0.00"}]),Us=v=>H(A.filter(M=>M.id!==v)),zs=v=>{const M=v.map(E=>({...E,id:Date.now()+Math.random()}));A.length===1&&!A[0].description&&parseFloat(A[0].price)===0?H(M):H(E=>[...E,...M]),De(!1)},{subtotal:ze,discountAmount:We,taxAmount:Ke,total:_e}=a.useMemo(()=>{const v=A.reduce((Ys,Qe)=>Ys+(parseFloat(Qe.quantity)||0)*(parseFloat(Qe.price)||0),0);let M=0;const E=parseFloat(ae)||0;F==="Percentage"&&E>0?M=v*(E/100):F==="Fixed"&&E>0&&(M=E);const K=v-M,ee=K*(parseFloat(L)/100),_s=K+ee;return{subtotal:v,discountAmount:M,taxAmount:ee,total:_s}},[A,L,F,ae]),Te=a.useMemo(()=>({publicId:r,documentType:s,documentNumber:O,documentDate:Q,dueDate:s==="Invoice"?V:void 0,companyDetails:c,clientDetails:Y,clientId:$,lineItems:A,notes:T,taxRate:L,discountType:F,discountValue:ae,subtotal:ze,discountAmount:We,taxAmount:Ke,total:_e,logo:d,accentColor:x,currency:p,showBarcode:g,paymentStatus:s==="Invoice"?S:void 0,paymentLink:P}),[r,s,O,Q,V,c,Y,$,A,T,L,F,ae,ze,We,Ke,_e,d,x,p,g,S,P]),Ws=async()=>{Se(!0);try{await n(Te),setTimeout(()=>{window.print(),Se(!1)},250)}catch(v){console.error("Failed to save document:",v),Se(!1)}},Ks=()=>{const v={...Te,id:`doc-${Date.now()}`},M=document.getElementById(Ye);M&&(Os({document:v,htmlContent:M.outerHTML}),Ge(!0))},U="w-full bg-slate-800/50 border border-slate-700 rounded-md px-3 py-2 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",Ye=`${s.toLowerCase()}-preview`;return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6 no-print",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:i}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-end flex-grow sm:flex-grow-0",children:[e.jsxs(k,{variant:"secondary",onClick:Ks,children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"}),"Email Document"]}),e.jsx(k,{onClick:Ws,disabled:Ve,children:Ve?"Saving...":"Finalize & Save PDF"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-4 no-print space-y-6",children:[e.jsxs(ie,{title:"Branding & Style",children:[e.jsxs("div",{children:[e.jsx("label",{className:f,children:"Company Logo"}),e.jsx("input",{type:"file",accept:"image/*",ref:Ue,onChange:Gs,className:"hidden"}),e.jsxs(k,{variant:"secondary",onClick:()=>{var v;return(v=Ue.current)==null?void 0:v.click()},className:"w-full",children:[e.jsx(Cs,{className:"w-4 h-4 mr-2"})," ",d?"Change Logo":"Upload Logo"]}),d&&e.jsx("img",{src:d,alt:"Company logo preview",className:"mt-4 rounded-md max-h-16 mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accentColor",className:f,children:"Accent Color"}),e.jsxs("div",{className:"relative flex items-center bg-slate-800/50 border border-slate-700 rounded-md",children:[e.jsx(da,{className:"w-5 h-5 text-slate-400 absolute left-3 pointer-events-none"}),e.jsx("input",{type:"color",id:"accentColor",value:x,onChange:v=>m(v.target.value),className:"w-full h-10 pl-10 p-1 bg-transparent border-none cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currency",className:f,children:"Currency"}),e.jsxs("div",{className:"relative",children:[e.jsx(ma,{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none z-10"}),e.jsx("select",{id:"currency",value:p,onChange:v=>j(v.target.value),className:`${U} pl-10 appearance-none`,children:ua.map(v=>e.jsxs("option",{value:v.symbol,children:[v.name," (",v.symbol,")"]},v.name))}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-400",children:e.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("label",{htmlFor:"showBarcode",className:`${f} mb-0 flex items-center gap-2`,children:[e.jsx(xa,{className:"w-5 h-5 text-slate-400"}),"Show Barcode"]}),e.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"showBarcode",checked:g,onChange:v=>D(v.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-700 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-500 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),s==="Invoice"&&e.jsx(ie,{title:"Payment Integration",children:e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"paymentLink",className:`${f} flex items-center gap-2`,children:[e.jsx(ge,{className:"w-5 h-5 text-slate-400"})," Payment Link (Optional)"]}),e.jsx("input",{type:"url",id:"paymentLink",value:P,onChange:v=>N(v.target.value),className:U,placeholder:"https://buy.stripe.com/..."}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'Add a link from your payment provider (Stripe, PayPal, etc.) to enable a "Pay Now" button on the public invoice page.'})]})}),e.jsxs(ie,{title:"Your Company Details",children:[e.jsx("input",{name:"name",value:c.name,onChange:v=>re(v,"company"),placeholder:"Company Name",className:U}),e.jsx("textarea",{name:"address",value:c.address,onChange:v=>re(v,"company"),placeholder:"Company Address",className:`${U} min-h-[60px]`}),e.jsx("input",{name:"email",type:"email",value:c.email,onChange:v=>re(v,"company"),placeholder:"Company Email",className:U})]}),e.jsxs(ie,{title:"Client Details",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"client-select",className:f,children:"Select Existing Client"}),e.jsxs("select",{id:"client-select",value:$,onChange:v=>Hs(v.target.value),className:U,children:[e.jsx("option",{value:"",children:"-- New/Manual Client --"}),t.map(v=>e.jsxs("option",{value:v.id,children:[v.name," (",v.company,")"]},v.id))]})]}),e.jsx("hr",{className:"border-slate-700"}),e.jsx("input",{name:"name",value:Y.name,onChange:v=>re(v,"client"),placeholder:"Client Name",className:U}),e.jsx("input",{name:"company",value:Y.company,onChange:v=>re(v,"client"),placeholder:"Client Company",className:U}),e.jsx("textarea",{name:"address",value:Y.address,onChange:v=>re(v,"client"),placeholder:"Client Address",className:`${U} min-h-[60px]`}),e.jsx("input",{name:"email",type:"email",value:Y.email,onChange:v=>re(v,"client"),placeholder:"Client Email",className:U})]}),e.jsxs(ie,{title:"Document Details",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:"includeYear",className:`${f} mb-0 flex items-center gap-2`,children:"Include Year in Number"}),e.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"includeYear",checked:z,onChange:v=>_(v.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-700 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-500 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"docNumber",className:f,children:[s," Number"]}),e.jsx("input",{id:"docNumber",type:"text",value:O,onChange:v=>q(v.target.value),className:U})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"docDate",className:f,children:"Date"}),e.jsx("input",{id:"docDate",type:"date",value:Q,onChange:v=>J(v.target.value),className:U})]})]}),s==="Invoice"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",className:f,children:"Due Date"}),e.jsx("input",{id:"dueDate",type:"date",value:V,onChange:v=>W(v.target.value),className:U})]})]}),e.jsxs(ie,{title:"Line Items",children:[A.map((v,M)=>e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-md space-y-2 relative",children:[e.jsx("button",{onClick:()=>Us(v.id),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-0.5",children:e.jsx(oe,{className:"w-3 h-3"})}),e.jsx("textarea",{value:v.description,onChange:E=>Ie(M,"description",E.target.value),placeholder:"Description",className:`${U} min-h-[40px]`}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",value:v.quantity,onChange:E=>Ie(M,"quantity",E.target.value),placeholder:"Qty",className:U}),e.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:E=>Ie(M,"price",E.target.value),placeholder:"Price",className:U})]})]},v.id)),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{onClick:Vs,variant:"secondary",className:"w-full",children:[e.jsx(we,{className:"w-4 h-4 mr-2"})," Add Item"]}),e.jsxs(k,{onClick:()=>De(!0),className:"w-full bg-purple-600 hover:bg-purple-500 shadow-purple-600/30 hover:shadow-purple-500/50 focus:ring-purple-400/50",children:[e.jsx(de,{className:"w-4 h-4 mr-2"})," AI Assistant"]})]})]}),e.jsxs(ie,{title:"Totals & Notes",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"discountType",className:f,children:"Discount Type"}),e.jsxs("select",{id:"discountType",value:F,onChange:v=>G(v.target.value),className:U,children:[e.jsx("option",{value:"Percentage",children:"Percentage (%)"}),e.jsx("option",{value:"Fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"discountValue",className:f,children:"Discount Value"}),e.jsx("input",{id:"discountValue",type:"number",step:"0.01",value:ae,onChange:v=>Bs(v.target.value),className:U})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taxRate",className:f,children:"Tax Rate (%)"}),e.jsx("input",{id:"taxRate",type:"number",step:"0.1",value:L,onChange:v=>b(v.target.value),className:U})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:f,children:"Notes"}),e.jsx("textarea",{id:"notes",value:T,onChange:v=>C(v.target.value),className:`${U} min-h-[80px]`})]}),s==="Invoice"&&e.jsxs("div",{children:[e.jsx("label",{className:f,children:"Payment Status"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"status-unpaid",name:"paymentStatus",type:"radio",value:"unpaid",checked:S==="unpaid",onChange:()=>w("unpaid"),className:"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"status-unpaid",className:"ml-2 block text-sm font-medium text-slate-300",children:"Unpaid"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"status-paid",name:"paymentStatus",type:"radio",value:"paid",checked:S==="paid",onChange:()=>w("paid"),className:"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"status-paid",className:"ml-2 block text-sm font-medium text-slate-300",children:"Paid"})]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-8 bg-slate-800/50 p-4 sm:p-6 lg:p-8 rounded-lg print:p-0 print:bg-transparent",children:e.jsx(Ns,{document:Te,previewId:Ye})})]}),ke&&e.jsx(Fs,{isOpen:Rs,onClose:()=>Ge(!1),documentData:ke.document,documentHtml:ke.htmlContent}),e.jsx(ha,{isOpen:qs,onClose:()=>De(!1),onGenerate:zs})]})},pa=()=>e.jsx(Ls,{documentType:"Invoice",documentNumberPrefix:"INV",title:"Invoice Generator",initialNotes:""}),ga=()=>e.jsx(Ls,{documentType:"Quotation",documentNumberPrefix:"QUO",title:"Quotation Generator",initialNotes:"This quotation is valid for 30 days."}),ja=({documentData:s,onClose:l})=>{const i=a.useRef(null);xe(i,!!s,l);const[o,t]=a.useState(!1),[n,r]=a.useState("");if(!s)return null;const c=`modal-document-preview-${s.id}`,u=()=>{window.print()},d=()=>{const h=document.getElementById(c);h&&(r(h.outerHTML),t(!0))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in no-print",onClick:l,role:"dialog","aria-modal":"true",children:e.jsxs("div",{ref:i,className:"relative bg-slate-900 w-full max-w-5xl h-[90vh] rounded-2xl shadow-2xl flex flex-col",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 flex justify-between items-center no-print",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[s.documentType,": #",s.documentNumber]}),e.jsxs("div",{children:[e.jsxs(k,{variant:"secondary",onClick:d,className:"mr-4",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"})," Email"]}),e.jsx(k,{onClick:u,className:"mr-4",children:"Print / Save as PDF"}),e.jsx(k,{variant:"secondary",onClick:l,children:"Close"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-gray-200 print:overflow-visible print:p-0 print:bg-transparent",children:e.jsx(Ns,{document:s,previewId:c})})]})}),s&&e.jsx(Fs,{isOpen:o,onClose:()=>t(!1),documentData:s,documentHtml:n})]})},ba=()=>{const{documentHistory:s,updateDocumentStatusInHistory:l,deleteDocumentFromHistory:i}=a.useContext(R),[o,t]=a.useState(""),[n,r]=a.useState("all"),[c,u]=a.useState(null),d=a.useMemo(()=>s.filter(m=>{if(n!=="all"&&m.documentType!==n)return!1;if(o.trim()==="")return!0;const p=o.toLowerCase();return m.documentNumber.toLowerCase().includes(p)||m.clientDetails.name.toLowerCase().includes(p)||m.clientDetails.company.toLowerCase().includes(p)}).sort((m,p)=>new Date(p.documentDate).getTime()-new Date(m.documentDate).getTime()),[s,o,n]),h=m=>{if(m.documentType!=="Invoice")return;const p=m.paymentStatus==="paid"?"unpaid":"paid";l(m.id,p)},x=m=>{window.confirm(`Are you sure you want to delete ${m.documentType} #${m.documentNumber}? This cannot be undone.`)&&i(m.id)};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Document History"}),e.jsxs("div",{className:"mb-6 bg-slate-900/50 border border-slate-800 rounded-lg p-4 flex flex-col sm:flex-row gap-4 items-center",children:[e.jsx("input",{type:"text",value:o,onChange:m=>t(m.target.value),placeholder:"Search by #, client name, or company...",className:`${y} flex-grow`}),e.jsxs("select",{value:n,onChange:m=>r(m.target.value),className:y,children:[e.jsx("option",{value:"all",children:"All Documents"}),e.jsx("option",{value:"Invoice",children:"Invoices Only"}),e.jsx("option",{value:"Quotation",children:"Quotations Only"})]})]}),e.jsx("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-slate-300",children:[e.jsx("thead",{className:"text-xs text-slate-400 uppercase bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Number"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Client"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Total"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:d.length>0?d.map(m=>e.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${m.documentType==="Invoice"?"bg-green-900/50 text-green-300":"bg-purple-900/50 text-purple-300"}`,children:m.documentType})}),e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-white whitespace-nowrap",children:m.documentNumber}),e.jsx("td",{className:"px-6 py-4",children:m.clientDetails.name||m.clientDetails.company}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(m.documentDate).toLocaleDateString()}),e.jsxs("td",{className:"px-6 py-4 font-mono",children:[m.currency,m.total.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:m.documentType==="Invoice"?e.jsxs("button",{onClick:()=>h(m),className:`flex items-center gap-2 text-xs font-semibold px-2 py-1 rounded-full transition-colors ${m.paymentStatus==="paid"?"bg-green-500/20 text-green-300 hover:bg-green-500/40":"bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/40"}`,children:[m.paymentStatus==="paid"?e.jsx(je,{className:"w-4 h-4"}):e.jsx(Be,{className:"w-4 h-4"}),m.paymentStatus==="paid"?"Paid":"Unpaid"]}):e.jsx("span",{className:"text-slate-500",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>u(m),className:"text-blue-400 hover:text-blue-300","aria-label":"View document",children:e.jsx(Re,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>x(m),className:"text-red-500 hover:text-red-400","aria-label":"Delete document",children:e.jsx(oe,{className:"w-5 h-5"})})]})})]},m.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-16 text-slate-500",children:"No documents found."})})})]})})}),e.jsx(ja,{documentData:c,onClose:()=>u(null)})]})},fa=s=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:e.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),Na=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),va=({task:s,users:l,currentUser:i,onClick:o,onDragStart:t,isDragging:n,isBlocked:r})=>{var w,g,D,P;const c=l.find(N=>N.id===s.assignedTo),u=new Date(s.dueDate)<new Date&&s.status!=="Done",d=i?s.assignedTo===i.id:!1,h={High:"bg-red-500/20 text-red-300 border-red-500/50",Medium:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",Low:"bg-blue-500/20 text-blue-300 border-blue-500/50"},x=N=>N.split(" ").map(O=>O[0]).join("").toUpperCase(),m=((w=s.subTasks)==null?void 0:w.filter(N=>N.completed).length)||0,p=((g=s.subTasks)==null?void 0:g.length)||0,j=((D=s.attachments)==null?void 0:D.length)||0,S=((P=s.dependencies)==null?void 0:P.length)||0;return e.jsxs("div",{draggable:!r,onDragStart:t,onClick:o,className:`
                bg-slate-800 p-4 rounded-lg border border-slate-700 relative
                transition-all duration-200
                ${n?"opacity-50 ring-2 ring-blue-500":""}
                ${r?"opacity-60 cursor-not-allowed bg-slate-800/50":"cursor-pointer hover:border-blue-500 hover:-translate-y-1"}
                ${d&&!r?"ring-2 ring-blue-400/70":""}
            `,children:[r&&e.jsx("div",{className:"absolute top-3 right-3",title:"This task is blocked by other tasks",children:e.jsx(fs,{className:"w-5 h-5 text-yellow-400"})}),e.jsx("h3",{className:"font-semibold text-white mb-2 pr-8",children:s.title}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full font-medium border ${h[s.priority]}`,children:s.priority}),e.jsxs("span",{className:`font-semibold ${u?"text-red-400":"text-slate-400"}`,children:["Due: ",new Date(s.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})]})]}),e.jsxs("div",{className:"mt-4 pt-2 border-t border-slate-700/50 flex justify-between items-center text-xs text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[S>0&&e.jsxs("span",{className:"flex items-center gap-1.5",title:`${S} dependencies`,children:[e.jsx(ge,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{children:S})]}),p>0&&e.jsxs("span",{className:"flex items-center gap-1.5",title:`${m} of ${p} sub-tasks completed`,children:[e.jsx(Na,{className:`w-4 h-4 ${m===p&&p>0?"text-green-400":"text-slate-500"}`}),e.jsxs("span",{children:[m,"/",p]})]}),j>0&&e.jsxs("span",{className:"flex items-center gap-1.5",title:`${j} attachments`,children:[e.jsx(fa,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{children:j})]})]}),c&&e.jsx("div",{title:c.name,className:"w-6 h-6 bg-slate-600 rounded-full flex items-center justify-center text-xs font-bold text-white flex-shrink-0",children:x(c.name)})]})]})},ya=({task:s,onSave:l,onCancel:i,onDelete:o})=>{const{users:t,projects:n,tasks:r,addTask:c,addNotification:u}=a.useContext(R),{currentUser:d}=a.useContext(ne),[h,x]=a.useState({title:"",description:"",status:"To Do",priority:"Medium",dueDate:new Date().toISOString().split("T")[0],assignedTo:"",relatedProject:"",subTasks:[],attachments:[],dependencies:[]}),[m,p]=a.useState(""),[j,S]=a.useState({name:"",url:""}),[w,g]=a.useState(""),[D,P]=a.useState(!1),[N,O]=a.useState(""),[q,z]=a.useState(!1);a.useEffect(()=>{if(s)x({title:s.title,description:s.description||"",status:s.status,priority:s.priority,dueDate:s.dueDate,assignedTo:s.assignedTo||"",relatedProject:s.relatedProject||"",subTasks:s.subTasks||[],attachments:s.attachments||[],dependencies:s.dependencies||[]});else{const b=new Date;b.setDate(b.getDate()+1),x({title:"",description:"",status:"To Do",priority:"Medium",dueDate:b.toISOString().split("T")[0],assignedTo:"",relatedProject:"",subTasks:[],attachments:[],dependencies:[]})}},[s]);const _=(d==null?void 0:d.role)==="Admin",Q=a.useMemo(()=>_?!0:d?!h.assignedTo||h.assignedTo===d.id:!1,[_,d,h.assignedTo]),J=a.useMemo(()=>{if(_)return t;if(!d)return[];const b=t.filter(F=>F.id===d.id);if(h.assignedTo&&h.assignedTo!==d.id){const F=t.find(G=>G.id===h.assignedTo);F&&b.push(F)}return b},[t,d,_,h.assignedTo]),V=b=>{x({...h,[b.target.name]:b.target.value})},W=()=>{if(m.trim()==="")return;const b={id:`sub-${Date.now()}`,title:m.trim(),completed:!1};x(F=>({...F,subTasks:[...F.subTasks,b]})),p("")},Y=b=>{const F=[...h.subTasks];F[b].completed=!F[b].completed,x(G=>({...G,subTasks:F}))},I=b=>{const F=h.subTasks.filter(G=>G.id!==b);x(G=>({...G,subTasks:F}))},$=()=>{if(j.name.trim()===""||j.url.trim()==="")return;try{new URL(j.url.trim())}catch{alert("Please enter a valid URL for the attachment.");return}const b={id:`att-${Date.now()}`,name:j.name.trim(),url:j.url.trim()};x(F=>({...F,attachments:[...F.attachments,b]})),S({name:"",url:""})},Z=b=>{const F=h.attachments.filter(G=>G.id!==b);x(G=>({...G,attachments:F}))},A=()=>{w&&!h.dependencies.includes(w)&&x(b=>({...b,dependencies:[...b.dependencies,w]})),g("")},H=b=>{x(F=>({...F,dependencies:F.dependencies.filter(G=>G!==b)}))},T=async()=>{if(N.trim()==="")return;z(!0);const b=new Date;b.setDate(b.getDate()+1);const F={title:N.trim(),status:"To Do",priority:"Medium",dueDate:b.toISOString().split("T")[0],subTasks:[],attachments:[],dependencies:[]};try{const G=await c(F);G&&(x(ae=>({...ae,dependencies:[...ae.dependencies,G.id]})),O(""),P(!1))}catch(G){console.error("Failed to create dependency task",G),u("Failed to create dependency task. Please try again.","error")}finally{z(!1)}},C=r.filter(b=>b.id!==(s==null?void 0:s.id)),L=b=>{b.preventDefault(),l(h,s)};return e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-6 animate-fade-in w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:s?"Edit Task":"Create New Task"}),s&&e.jsx(k,{variant:"secondary",onClick:()=>o(s),className:"!px-4 !py-2 border-red-500/50 text-red-400 hover:bg-red-500/20",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4 overflow-y-auto pr-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:f,children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:h.title,onChange:V,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:f,children:"Dependencies (tasks that must be completed first)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:w,onChange:b=>g(b.target.value),className:`${y} flex-grow`,children:[e.jsx("option",{value:"",children:"Select a task to add..."}),C.map(b=>e.jsx("option",{value:b.id,children:b.title},b.id))]}),e.jsx(k,{type:"button",variant:"secondary",onClick:A,children:"Add"}),!D&&e.jsx(k,{type:"button",variant:"secondary",onClick:()=>P(!0),children:"Create New"})]}),D&&e.jsxs("div",{className:"mt-2 flex gap-2 p-2 border border-slate-700 rounded-md bg-slate-800/50",children:[e.jsx("input",{type:"text",value:N,onChange:b=>O(b.target.value),placeholder:"New dependency task title...",className:`${y} flex-grow`,autoFocus:!0}),e.jsx(k,{type:"button",onClick:T,disabled:q,children:q?"Creating...":"Create & Add"}),e.jsx(k,{type:"button",variant:"secondary",onClick:()=>P(!1),disabled:q,children:"Cancel"})]}),h.dependencies.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2 p-2 bg-slate-800/30 rounded-md",children:h.dependencies.map(b=>{const F=r.find(G=>G.id===b);return e.jsxs("span",{className:"flex items-center gap-2 bg-slate-700 text-slate-200 text-xs font-medium px-2.5 py-1 rounded-full",children:[e.jsx(ge,{className:"w-3 h-3"}),(F==null?void 0:F.title)||"Unknown Task",e.jsx("button",{type:"button",onClick:()=>H(b),className:"text-slate-400 hover:text-white -mr-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]},b)})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:f,children:"Description"}),e.jsx("textarea",{name:"description",id:"description",rows:3,value:h.description,onChange:V,className:y})]}),e.jsxs("div",{children:[e.jsx("label",{className:f,children:"Sub-tasks"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto bg-slate-800/30 p-2 rounded-md",children:h.subTasks.map((b,F)=>e.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/50 p-2 rounded",children:[e.jsx("input",{type:"checkbox",checked:b.completed,onChange:()=>Y(F),className:"h-4 w-4 rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:`flex-grow text-sm ${b.completed?"line-through text-slate-500":"text-slate-200"}`,children:b.title}),e.jsx("button",{type:"button",onClick:()=>I(b.id),className:"text-red-500 hover:text-red-400 flex-shrink-0",children:e.jsx(oe,{className:"w-4 h-4"})})]},b.id))}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{type:"text",value:m,onChange:b=>p(b.target.value),onKeyDown:b=>b.key==="Enter"&&(b.preventDefault(),W()),placeholder:"Add a new sub-task",className:`${y} flex-grow`}),e.jsx(k,{type:"button",variant:"secondary",onClick:W,children:"Add"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:f,children:"Attachments"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto bg-slate-800/30 p-2 rounded-md",children:h.attachments.map(b=>e.jsxs("div",{className:"flex items-center justify-between gap-2 bg-slate-800/50 p-2 rounded",children:[e.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:underline truncate",children:b.name}),e.jsx("button",{type:"button",onClick:()=>Z(b.id),className:"text-red-500 hover:text-red-400 flex-shrink-0",children:e.jsx(oe,{className:"w-4 h-4"})})]},b.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-2 p-2 border border-slate-700 rounded",children:[e.jsx("input",{type:"text",value:j.name,onChange:b=>S({...j,name:b.target.value}),placeholder:"Attachment Name",className:`${y} flex-grow`}),e.jsx("input",{type:"url",value:j.url,onChange:b=>S({...j,url:b.target.value}),placeholder:"Attachment URL",className:`${y} flex-grow`}),e.jsx(k,{type:"button",variant:"secondary",onClick:$,children:"Add"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:f,children:"Status"}),e.jsxs("select",{name:"status",id:"status",value:h.status,onChange:V,className:y,required:!0,children:[e.jsx("option",{value:"To Do",children:"To Do"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Done",children:"Done"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:f,children:"Priority"}),e.jsxs("select",{name:"priority",id:"priority",value:h.priority,onChange:V,className:y,required:!0,children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"assignedTo",className:f,children:"Assign To"}),e.jsxs("select",{name:"assignedTo",id:"assignedTo",value:h.assignedTo,onChange:V,className:`${y} disabled:bg-slate-800 disabled:cursor-not-allowed`,disabled:!Q,children:[e.jsx("option",{value:"",children:"Unassigned"}),J.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]}),!_&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:Q?"You can assign this task to yourself.":"Only Admins can re-assign tasks from other users."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",className:f,children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",id:"dueDate",value:h.dueDate,onChange:V,className:y,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"relatedProject",className:f,children:"Related Project (Optional)"}),e.jsxs("select",{name:"relatedProject",id:"relatedProject",value:h.relatedProject,onChange:V,className:y,children:[e.jsx("option",{value:"",children:"None"}),n.map(b=>e.jsx("option",{value:b.slug,children:b.title},b.slug))]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 flex-shrink-0",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Task"})]})]})]})},wa=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"m3 8 4-4 4 4"}),e.jsx("path",{d:"M7 4v16"}),e.jsx("path",{d:"M11 12h10"}),e.jsx("path",{d:"M11 18h7"}),e.jsx("path",{d:"M11 6h13"})]}),Ca=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"m3 16 4 4 4-4"}),e.jsx("path",{d:"M7 20V4"}),e.jsx("path",{d:"M11 12h10"}),e.jsx("path",{d:"M11 18h7"}),e.jsx("path",{d:"M11 6h13"})]}),ka=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),Sa=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),e.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),e.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),e.jsx("line",{x1:"21",y1:"18",x2:"3",y2:"18"})]}),Ze=["To Do","In Progress","Done"],Da=()=>{const{tasks:s,users:l,addTask:i,updateTask:o,deleteTask:t,addNotification:n}=a.useContext(R),{currentUser:r}=a.useContext(ne),[c,u]=a.useState(!1),[d,h]=a.useState(null),[x,m]=a.useState(!1),[p,j]=a.useState("board"),[S,w]=a.useState("dueDate"),[g,D]=a.useState("asc"),[P,N]=a.useState(null),[O,q]=a.useState(null),z=a.useMemo(()=>{const T=new Map(s.map(C=>[C.id,C.status]));return s.map(C=>({...C,isBlocked:C.dependencies.some(L=>T.get(L)!=="Done")}))},[s]),_=a.useMemo(()=>{const T={High:3,Medium:2,Low:1};return[...z].sort((C,L)=>{let b=0;return S==="dueDate"?b=new Date(C.dueDate).getTime()-new Date(L.dueDate).getTime():S==="priority"?b=T[L.priority]-T[C.priority]:S==="createdAt"&&(b=new Date(L.createdAt).getTime()-new Date(C.createdAt).getTime()),g==="asc"?b:-b})},[z,S,g]),Q=a.useMemo(()=>Ze.reduce((T,C)=>(T[C]=_.filter(L=>L.status===C),T),{}),[_]),J=()=>{h(null),u(!0)},V=T=>{h(T),u(!0)},W=()=>{u(!1),h(null)},Y=async T=>{window.confirm(`Are you sure you want to delete task "${T.title}"?`)&&(m(!0),await t(T.id),m(!1),W())},I=async(T,C)=>{m(!0),C?await o(C.id,T):await i(T),m(!1),W()},$=(T,C)=>{if(C.isBlocked){T.preventDefault();return}N(C),T.dataTransfer.effectAllowed="move"},Z=(T,C)=>{T.preventDefault(),P&&P.status!==C&&q(C)},A=()=>{q(null)},H=async T=>{P&&P.status!==T&&(P.isBlocked&&T!=="To Do"?n("This task is blocked by its dependencies and cannot be started.","warning"):(m(!0),await o(P.id,{status:T}),m(!1))),N(null),q(null)};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 relative h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Task Management"}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-md p-1 flex items-center",children:[e.jsxs("button",{onClick:()=>j("board"),className:`px-2 py-1 rounded-md text-sm flex items-center gap-2 ${p==="board"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-700"}`,children:[e.jsx(ka,{className:"w-4 h-4"})," Board"]}),e.jsxs("button",{onClick:()=>j("timeline"),className:`px-2 py-1 rounded-md text-sm flex items-center gap-2 ${p==="timeline"?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-700"}`,children:[e.jsx(Sa,{className:"w-4 h-4"})," Timeline"]})]}),p==="board"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"sort-by",className:"text-sm font-medium text-slate-400",children:"Sort by:"}),e.jsxs("select",{id:"sort-by",value:S,onChange:T=>w(T.target.value),className:"bg-slate-800 border border-slate-700 rounded-md px-2 py-1 text-sm focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"dueDate",children:"Due Date"}),e.jsx("option",{value:"priority",children:"Priority"}),e.jsx("option",{value:"createdAt",children:"Creation Date"})]}),e.jsx("button",{onClick:()=>D(T=>T==="asc"?"desc":"asc"),className:"p-1.5 bg-slate-800 border border-slate-700 rounded-md hover:bg-slate-700","aria-label":`Sort ${g==="asc"?"descending":"ascending"}`,children:g==="asc"?e.jsx(wa,{className:"w-4 h-4"}):e.jsx(Ca,{className:"w-4 h-4"})})]}),e.jsxs(k,{onClick:J,children:[e.jsx(we,{className:"w-5 h-5 mr-2"}),"Create New Task"]})]})]}),p==="board"?e.jsx("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-3 gap-6",children:Ze.map(T=>e.jsxs("div",{onDragOver:C=>Z(C,T),onDragLeave:A,onDrop:()=>H(T),className:`bg-slate-900/50 rounded-lg p-4 transition-colors duration-300 flex flex-col ${O===T?"bg-blue-900/50":""}`,children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 border-b-2 border-slate-700 pb-2 flex justify-between items-center flex-shrink-0",children:[e.jsx("span",{children:T}),e.jsx("span",{className:"text-sm bg-slate-700 text-slate-300 rounded-full w-6 h-6 flex items-center justify-center",children:Q[T].length})]}),e.jsxs("div",{className:"space-y-4 flex-grow overflow-y-auto pr-2",children:[Q[T].map(C=>e.jsx(va,{task:C,isBlocked:C.isBlocked,users:l,currentUser:r,onClick:()=>V(C),onDragStart:L=>$(L,C),isDragging:(P==null?void 0:P.id)===C.id},C.id)),O===T&&e.jsx("div",{className:"h-24 border-2 border-dashed border-blue-500 rounded-lg bg-blue-900/30"})]})]},T))}):e.jsx("div",{className:"flex-grow bg-slate-900/50 rounded-lg p-4",children:e.jsx(kt,{tasks:s})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:W,children:e.jsx("div",{onClick:T=>T.stopPropagation(),className:"w-full max-w-2xl",children:e.jsx(ya,{task:d,onSave:I,onCancel:W,onDelete:Y})})}),x&&e.jsx(me,{size:"lg"})]})},Ia=({link:s,onSave:l,onCancel:i})=>{const[o,t]=a.useState({name:"",url:"",iconName:be[0]||""});a.useEffect(()=>{var c;t(s?{name:s.name,url:s.url,iconName:s.iconName}:{name:((c=be[0])==null?void 0:c.replace("Icon",""))||"",url:"",iconName:be[0]||""})},[s]);const n=c=>{const{name:u,value:d}=c.target;t(u==="iconName"&&!s?{...o,iconName:d,name:d.replace("Icon","")}:{...o,[u]:d})},r=c=>{c.preventDefault(),l(o,s)};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit Social Link":"Create New Social Link"}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"iconName",className:f,children:"Platform Icon"}),e.jsx("select",{id:"iconName",name:"iconName",value:o.iconName,onChange:n,className:y,required:!0,children:be.map(c=>e.jsx("option",{value:c,children:c.replace("Icon","")},c))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:f,children:"Platform Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:n,className:y,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:f,children:"URL"}),e.jsx("input",{type:"url",name:"url",id:"url",value:o.url,onChange:n,className:y,required:!0,placeholder:"https://www.example.com/username"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Link"})]})]})]})},Ta=()=>{const{socialLinks:s,addSocialLink:l,updateSocialLink:i,deleteSocialLink:o}=a.useContext(R),t=se(l,i,o),n=[{header:"Platform",accessor:r=>r.name},{header:"URL",accessor:r=>e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:r.url})}];return e.jsx(te,{title:"Manage Social Links",itemName:"social link",data:s,columns:n,crudHooks:t,FormComponent:Ia,formItemPropName:"link",itemTitleAccessor:r=>r.name})},Pa=()=>{const s=a.useContext(R),{currentUser:l}=a.useContext(ne),[i,o]=a.useState(null),[t,n]=a.useState([]),[r,c]=a.useState(""),[u,d]=a.useState(!1),h=a.useRef(null);a.useEffect(()=>{d(!0);const p=JSON.stringify({users:s.users,clients:s.clients,projects:s.projects,tasks:s.tasks,blogPosts:s.blogPosts,marketScanners:s.marketScanners}),j=it(p);o(j),n([{id:"init",role:"model",content:"Hello! I'm The Strategist, your AI business partner. How can I help you run the agency today? Feel free to ask about projects, manage tasks, or request strategic analysis."}]),d(!1)},[]),a.useEffect(()=>{var p;(p=h.current)==null||p.scrollIntoView({behavior:"smooth"})},[t,u]);const x=async(p,j)=>{p.preventDefault();const S=j||r.trim();if(!S||u||!i)return;const w={id:`user-${Date.now()}`,role:"user",content:S};n(g=>[...g,w]),c(""),d(!0);try{let g=await i.sendMessage({message:S});for(;g.functionCalls&&g.functionCalls.length>0;){const D=g.functionCalls,P=[];for(const N of D){const O=await ot(N.name,N.args,s,l);P.push({functionResponse:{name:N.name,response:O}})}g=await i.sendMessage({message:{parts:P}})}n(D=>[...D,{id:`model-${Date.now()}`,role:"model",content:g.text}])}catch(g){console.error("Strategist error:",g),n(D=>[...D,{id:`err-${Date.now()}`,role:"model",content:"Sorry, an error occurred. Please try again."}])}finally{d(!1)}},m=["Forecast our revenue for the next 3 months.","Analyze our blog content for gaps.","Develop a 3-month content plan for 'AI in Marketing'.","Show me all overdue invoices.","Find internal linking opportunities for the 'future-of-seo' post.","What's the team's current workload?"];return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 animate-fade-in h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"The Strategist"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Your conversational AI partner. Ask questions, issue commands, and get strategic insights."})]}),e.jsxs("div",{className:"flex-grow bg-slate-900/70 border border-slate-800 rounded-lg flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[t.map(p=>e.jsxs("div",{className:`flex items-start gap-3 ${p.role==="user"?"justify-end":""}`,children:[p.role==="model"&&e.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center text-blue-400 font-bold text-sm flex-shrink-0",children:e.jsx(de,{className:"w-5 h-5"})}),e.jsx("div",{className:`max-w-[85%] rounded-2xl p-3 text-sm prose prose-sm prose-invert max-w-none ${p.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-slate-800 text-slate-200 rounded-bl-none"}`,children:us(p.content)})]},p.id)),u&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center text-blue-400 font-bold text-sm flex-shrink-0",children:e.jsx(de,{className:"w-5 h-5 animate-spin"})}),e.jsx("div",{className:"max-w-[85%] rounded-2xl p-3 text-sm bg-slate-800 text-slate-200 rounded-bl-none",children:e.jsx("span",{className:"blinking-cursor"})})]}),e.jsx("div",{ref:h})]}),t.length<=1&&!u&&e.jsxs("div",{className:"p-4 text-sm text-slate-400",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Try asking:"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:m.map(p=>e.jsxs("button",{onClick:j=>x(j,p),className:"text-left p-2 bg-slate-800/50 rounded-md hover:bg-slate-800 transition-colors",children:['"',p,'"']},p))})]}),e.jsx("footer",{className:"flex-shrink-0 p-4 border-t border-slate-800 bg-slate-900",children:e.jsxs("form",{onSubmit:x,className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:p=>c(p.target.value),placeholder:"Ask The Strategist...",className:"flex-grow bg-slate-800/50 border border-slate-700 rounded-full px-4 py-2 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:u}),e.jsx("button",{type:"submit",className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center flex-shrink-0 hover:bg-blue-500 transition-colors disabled:bg-slate-600",disabled:u||!r.trim(),"aria-label":"Send message",children:e.jsx(Ce,{className:"w-5 h-5"})})]})})]})]})},Aa=({scanner:s,onSave:l,onCancel:i})=>{const{clients:o}=a.useContext(R),[t,n]=a.useState({name:"",targetClientId:"",industry:"",competitors:[]}),[r,c]=a.useState("");a.useEffect(()=>{s&&(n({name:s.name,targetClientId:s.targetClientId,industry:s.industry,competitors:s.competitors}),c(s.competitors.join(`
`)))},[s]);const u=h=>{const{name:x,value:m}=h.target;x==="competitors"?c(m):n({...t,[x]:m})},d=h=>{h.preventDefault();const x={...t,competitors:r.split(`
`).map(m=>m.trim()).filter(Boolean)};l(x,s)};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit Market Scanner":"Create New Market Scanner"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:f,children:"Scanner Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:t.name,onChange:u,className:y,required:!0,placeholder:"e.g., SaaS Market Watch"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"targetClientId",className:f,children:"Client Focus"}),e.jsxs("select",{name:"targetClientId",id:"targetClientId",value:t.targetClientId,onChange:u,className:y,required:!0,children:[e.jsx("option",{value:"",children:"Select a Client"}),o.map(h=>e.jsx("option",{value:h.id,children:h.company},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"industry",className:f,children:"Industry / Market"}),e.jsx("input",{type:"text",name:"industry",id:"industry",value:t.industry,onChange:u,className:y,required:!0,placeholder:"e.g., B2B Data Analytics"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"competitors",className:f,children:"Competitors (one URL per line)"}),e.jsx("textarea",{name:"competitors",id:"competitors",rows:4,value:r,onChange:u,className:y,required:!0,placeholder:`https://www.competitor1.com
https://www.competitor2.com`})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Scanner"})]})]})]})},Fa={EMERGING_TREND:Me,COMPETITOR_MOVE:pe,CONTENT_GAP:fe,OPPORTUNITY:ws},La=({insight:s})=>{const l=Fa[s.type]||Ne;return e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-lg p-4 animate-fade-in",children:[e.jsxs("h4",{className:"font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(l,{className:"w-5 h-5 text-blue-400"}),s.title]}),e.jsx("p",{className:"text-sm text-slate-300 mb-3",children:s.description}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700",children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-slate-400 mb-1",children:"Suggestion"}),e.jsx("p",{className:"text-sm text-blue-300",children:s.suggestion})]})]})},Ma=()=>{const{marketScanners:s,clients:l,addMarketScanner:i,updateMarketScanner:o,deleteMarketScanner:t}=a.useContext(R),[n,r]=a.useState(null),[c,u]=a.useState(!1),[d,h]=a.useState(null),[x,m]=a.useState(""),p=se(i,o,t),j=a.useMemo(()=>s.find(g=>g.id===n),[s,n]),S=a.useMemo(()=>l.find(g=>g.id===(j==null?void 0:j.targetClientId)),[l,j]),w=async()=>{if(j){u(!0),m(""),h(null);try{const g=await ct(j.industry,j.competitors);h(g)}catch(g){m(g.message||"An unexpected error occurred during the scan.")}finally{u(!1)}}};return p.isFormVisible?e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(te,{title:"Manage Market Scanners",itemName:"scanner",data:s,columns:[],crudHooks:p,FormComponent:Aa,formItemPropName:"scanner",itemTitleAccessor:g=>g.name})}):e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Horizon Scanner"}),e.jsxs("div",{className:"bg-blue-900/50 border border-blue-500/50 text-blue-200 px-4 py-3 rounded-lg relative mb-6 flex items-center gap-4",role:"alert",children:[e.jsx(ce,{className:"w-8 h-8 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Superpower Unlocked!"}),e.jsxs("p",{className:"text-sm",children:["You can now run market scans conversationally in ",e.jsx("span",{className:"font-semibold",children:"The Strategist"}),'. Try asking: "Run a market scan for [Client Name]".']})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Select Scanner"}),e.jsxs("select",{value:n||"",onChange:g=>r(g.target.value),className:"w-full bg-slate-800/50 border border-slate-700 rounded-md px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-- Choose a scanner --"}),s.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]}),e.jsx(k,{onClick:p.handleCreateNew,variant:"secondary",className:"w-full mt-4",children:"Manage Scanners"})]}),j&&e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:j.name}),S&&e.jsxs("p",{className:"text-sm text-blue-400 mb-3",children:["For: ",S.company]}),e.jsxs("p",{className:"text-sm text-slate-400 mb-4",children:[e.jsx("strong",{children:"Industry:"})," ",j.industry]}),e.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-2",children:"Competitors Monitored:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-slate-400 space-y-1",children:j.competitors.map(g=>e.jsx("li",{className:"truncate",children:g},g))}),e.jsxs(k,{onClick:w,disabled:c,className:"w-full mt-6",children:[e.jsx(Ne,{className:`w-5 h-5 mr-2 ${c?"animate-spin":""}`}),c?"Scanning...":"Run Manual Scan"]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative bg-slate-900/70 border border-slate-800 rounded-lg p-6 min-h-[60vh]",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Market Insights"}),c&&e.jsx(me,{}),x&&e.jsx("div",{role:"alert",className:"text-red-400 text-center",children:x}),d?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map((g,D)=>e.jsx(La,{insight:g},D))}):!c&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-slate-500 pt-16",children:[e.jsx(Ne,{className:"w-16 h-16 mb-4"}),e.jsx("p",{className:"text-lg",children:j?"Ready to scan for insights.":"Select a scanner to begin."})]})]})})]})]})},Ea=["Full-time","Part-time","Internship"],$a=({job:s,onSave:l,onCancel:i})=>{const[o,t]=a.useState({title:"",location:"",type:"Full-time",description:""}),[n,r]=a.useState(""),[c,u]=a.useState("");a.useEffect(()=>{s?(t({title:s.title,location:s.location,type:s.type,description:s.description}),r(s.responsibilities.join(`
`)),u(s.qualifications.join(`
`))):(t({title:"",location:"Remote",type:"Full-time",description:""}),r(""),u(""))},[s]);const d=x=>{t({...o,[x.target.name]:x.target.value})},h=x=>{x.preventDefault();const m={...o,type:o.type,responsibilities:n.split(`
`).map(p=>p.trim()).filter(Boolean),qualifications:c.split(`
`).map(p=>p.trim()).filter(Boolean)};l(m,s)};return e.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm border border-slate-800 rounded-lg p-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:s?"Edit Job Opening":"Create New Job Opening"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"title",className:f,children:"Job Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:o.title,onChange:d,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:f,children:"Employment Type"}),e.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:y,required:!0,children:Ea.map(x=>e.jsx("option",{value:x,children:x},x))})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:f,children:"Location"}),e.jsx("input",{type:"text",name:"location",id:"location",value:o.location,onChange:d,className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:f,children:"Short Description (for listing view)"}),e.jsx("textarea",{name:"description",id:"description",rows:2,value:o.description,onChange:d,className:y,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"responsibilities",className:f,children:"Responsibilities (one per line)"}),e.jsx("textarea",{name:"responsibilities",id:"responsibilities",rows:6,value:n,onChange:x=>r(x.target.value),className:y,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"qualifications",className:f,children:"Qualifications (one per line)"}),e.jsx("textarea",{name:"qualifications",id:"qualifications",rows:6,value:c,onChange:x=>u(x.target.value),className:y,required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(k,{type:"button",variant:"secondary",onClick:i,children:"Cancel"}),e.jsx(k,{type:"submit",children:s?"Save Changes":"Create Job"})]})]})]})},Ba=()=>{const{jobOpenings:s,addJobOpening:l,updateJobOpening:i,deleteJobOpening:o}=a.useContext(R),t=se(l,i,o),n=[{header:"Title",accessor:r=>r.title},{header:"Location",accessor:r=>r.location},{header:"Type",accessor:r=>r.type}];return e.jsx(te,{title:"Manage Career Openings",itemName:"job opening",data:s,columns:n,crudHooks:t,FormComponent:$a,formItemPropName:"job",itemTitleAccessor:r=>r.title})},Ra=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),ue=({label:s,value:l})=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-slate-400",children:s}),e.jsx("p",{className:"text-slate-200 mt-1",children:l||"N/A"})]}),Oa=({application:s,onClose:l})=>{const i=a.useRef(null);return xe(i,!!s,l),s?e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in",onClick:l,role:"dialog","aria-modal":"true",children:e.jsxs("div",{ref:i,className:"relative bg-slate-900 w-full max-w-3xl h-[80vh] rounded-2xl shadow-2xl flex flex-col",onClick:o=>o.stopPropagation(),children:[e.jsxs("header",{className:"p-4 border-b border-slate-800 flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Application Details"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["from ",s.name]})]}),e.jsx(k,{variant:"secondary",onClick:l,className:"!p-2",children:e.jsx($e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-4 bg-slate-800/50 rounded-lg",children:[e.jsx(ue,{label:"Applicant Name",value:s.name}),e.jsx(ue,{label:"Email",value:s.email}),e.jsx(ue,{label:"Phone",value:s.phone}),e.jsx(ue,{label:"Applying For",value:s.jobTitle}),e.jsx(ue,{label:"Submitted On",value:new Date(s.submittedAt).toLocaleString()}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-slate-400",children:"Resume"}),e.jsxs("a",{href:s.resume.dataUrl,download:s.resume.filename,className:"mt-1 inline-flex items-center gap-2 text-blue-400 hover:text-blue-300 hover:underline",children:[e.jsx(Ra,{className:"w-4 h-4"}),s.resume.filename]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Cover Letter"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg",children:e.jsx("p",{className:"whitespace-pre-wrap font-sans text-sm text-slate-200 leading-relaxed",children:s.coverLetter})})]})]})]})}):null},qa=()=>{const{jobApplications:s}=a.useContext(R),[l,i]=a.useState(""),[o,t]=a.useState(null),n=a.useMemo(()=>s.filter(r=>{if(l.trim()==="")return!0;const c=l.toLowerCase();return r.name.toLowerCase().includes(c)||r.email.toLowerCase().includes(c)||r.jobTitle.toLowerCase().includes(c)}).sort((r,c)=>new Date(c.submittedAt).getTime()-new Date(r.submittedAt).getTime()),[s,l]);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Job Applications"}),e.jsx("div",{className:"mb-6 bg-slate-900/50 border border-slate-800 rounded-lg p-4",children:e.jsx("input",{type:"text",value:l,onChange:r=>i(r.target.value),placeholder:"Search by name, email, or job title...",className:y})}),e.jsx("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-slate-300",children:[e.jsx("thead",{className:"text-xs text-slate-400 uppercase bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Applicant Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Applied For"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date Submitted"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:n.length>0?n.map(r=>e.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/30",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-white whitespace-nowrap",children:r.name}),e.jsx("td",{className:"px-6 py-4",children:r.email}),e.jsx("td",{className:"px-6 py-4",children:r.jobTitle}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(r.submittedAt).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>t(r),className:"text-blue-400 hover:text-blue-300","aria-label":`View application from ${r.name}`,children:e.jsx(Re,{className:"w-5 h-5"})})})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-16 text-slate-500",children:"No applications found."})})})]})})}),e.jsx(Oa,{application:o,onClose:()=>t(null)})]})},Ha=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),e.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),e.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Ms=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),Es=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),He=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M7 10v12"}),e.jsx("path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3 3 0 0 1 3 3z"})]}),$s=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M17 14V2"}),e.jsx("path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3 3 0 0 1-3-3z"})]}),Ga=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("polyline",{points:"16 18 22 12 16 6"}),e.jsx("polyline",{points:"8 6 2 12 8 18"}),e.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"20"})]}),Va=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),e.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]}),Ua=s=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[e.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}),e.jsx("path",{d:"M3.22 12H9.5l.5-1 2 4.44 2.11-7.11 1.12 3.33H22"})]}),za=["Parsing Ideal Customer Profile...","Querying lead databases...","Analyzing company profiles...","Filtering for technology stack...","Ranking potential leads...","Compiling prospect list..."],Wa=["Initiating comprehensive audit...","Crawling site for technical health...","Analyzing on-page SEO & content...","Scanning social media presence...","Evaluating competitive landscape...","Identifying key pain points...","Developing strategic roadmap...","Generating outreach materials...","Finalizing intelligence report..."],Xe=({mode:s,target:l})=>{const i=s==="finding"?za:Wa,[o,t]=a.useState(0),[n,r]=a.useState(0),c=s==="finding"?1500:8e3;return a.useEffect(()=>{const u=c/i.length,d=setInterval(()=>{t(x=>x<i.length-1?x+1:x)},u),h=setInterval(()=>{r(x=>x<100?x+1:100)},c/100);return()=>{clearInterval(d),clearInterval(h)}},[i,c]),e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg p-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-400",children:s==="finding"?"Finding Prospects...":"Analyzing Prospect..."}),l&&e.jsx("p",{className:"text-slate-400 font-mono break-all",children:l})]}),e.jsxs("div",{className:"w-full bg-slate-700 rounded-full h-4 mb-6 relative overflow-hidden",children:[e.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-100 ease-linear",style:{width:`${n}%`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-400/50 to-transparent w-32 animate-shine"})]}),e.jsx("div",{className:"bg-black/50 rounded-md p-4 h-48 font-mono text-sm text-green-400 overflow-y-auto",children:i.slice(0,o+1).map((u,d)=>e.jsxs("p",{className:d===o?"animate-pulse":"",children:[e.jsx("span",{className:"text-slate-500 mr-2",children:`[${Math.min(100,Math.round(d*(100/(i.length-1)))).toString().padStart(3," ")}%] >`}),u]},d))})]})},Ka=({score:s})=>{const i=2*Math.PI*18,o=i-s/100*i,t=n=>n>=80?"stroke-green-500":n>=50?"stroke-yellow-500":"stroke-red-500";return e.jsxs("div",{className:"relative w-12 h-12",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 40 40",children:[e.jsx("circle",{className:"stroke-slate-700",strokeWidth:"4",cx:"20",cy:"20",r:18,fill:"transparent"}),e.jsx("circle",{className:`transform-gpu -rotate-90 origin-center transition-all duration-1000 ease-out ${t(s)}`,strokeWidth:"4",strokeLinecap:"round",cx:"20",cy:"20",r:18,fill:"transparent",strokeDasharray:i,style:{strokeDashoffset:o}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white",children:s})]})},es=({swot:s})=>{if(!s)return e.jsxs(B,{className:"print-grid-item",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Holistic SWOT Analysis"}),e.jsx("p",{className:"text-sm text-center text-slate-400",children:"SWOT analysis data is not available for this prospect."})]});const l=[{title:"Strengths",items:s.strengths,icon:He,color:"text-green-400"},{title:"Weaknesses",items:s.weaknesses,icon:$s,color:"text-yellow-400"},{title:"Opportunities",items:s.opportunities,icon:Me,color:"text-blue-400"},{title:"Threats",items:s.threats,icon:Ee,color:"text-red-400"}];return e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Holistic SWOT Analysis"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 print-swot-grid",children:l.map(({title:i,items:o,icon:t,color:n})=>e.jsxs("div",{children:[e.jsxs("h4",{className:`font-semibold mb-2 flex items-center gap-2 ${n}`,children:[e.jsx(t,{className:"w-5 h-5"})," ",i]}),e.jsx("ul",{className:"space-y-1 list-disc list-inside text-sm text-slate-300",children:(o||[]).map((r,c)=>e.jsx("li",{children:r},c))})]},i))})]})},ss=({social:s})=>{const l=[{key:"linkedIn",name:"LinkedIn",icon:ps,data:s==null?void 0:s.linkedIn},{key:"twitter",name:"X / Twitter",icon:gs,data:s==null?void 0:s.twitter},{key:"instagram",name:"Instagram",icon:js,data:s==null?void 0:s.instagram},{key:"facebook",name:"Facebook",icon:ks,data:s==null?void 0:s.facebook}].filter(i=>i.data);return l.length===0?e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"In-Depth Social Presence Analysis"}),e.jsx("p",{className:"text-sm text-center text-slate-400",children:"No significant social media presence was detected."})]}):e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"In-Depth Social Presence Analysis"}),e.jsx("div",{className:"space-y-6",children:l.map(({name:i,icon:o,data:t})=>e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h4",{className:"font-bold text-lg text-white flex items-center gap-2",children:[e.jsx(o,{className:"w-6 h-6"})," ",i]}),t.platformScore!=null&&e.jsx(Ka,{score:t.platformScore})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-center",children:[e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded-md",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-300",children:t.followerCount}),e.jsxs("p",{className:"text-xs text-slate-400 flex items-center justify-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"})," Followers"]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-2 rounded-md",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-300",children:t.postingFrequency}),e.jsxs("p",{className:"text-xs text-slate-400 flex items-center justify-center gap-1",children:[e.jsx(bs,{className:"w-3 h-3"})," Frequency"]})]})]}),e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-slate-300 flex items-center gap-2 mb-1",children:[e.jsx(Es,{className:"w-4 h-4 text-slate-400"})," Content Strategy:"]}),e.jsx("p",{className:"text-slate-400 pl-6",children:t.contentStrategyAnalysis})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-slate-300 flex items-center gap-2 mb-1",children:[e.jsx(Oe,{className:"w-4 h-4 text-slate-400"})," Engagement Analysis:"]}),e.jsx("p",{className:"text-slate-400 pl-6",children:t.engagementAnalysis})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-slate-300 flex items-center gap-2 mb-1",children:[e.jsx(He,{className:"w-4 h-4 text-green-400"})," Strengths:"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-400 pl-6",children:(t.strengths||[]).map((n,r)=>e.jsx("li",{children:n},r))})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-slate-300 flex items-center gap-2 mb-1",children:[e.jsx($s,{className:"w-4 h-4 text-yellow-400"})," Weaknesses:"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-400 pl-6",children:(t.weaknesses||[]).map((n,r)=>e.jsx("li",{children:n},r))})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-slate-300 flex items-center gap-2 mb-1",children:[e.jsx(ve,{className:"w-4 h-4 text-slate-400"})," Recommendations:"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-400 pl-6",children:(t.recommendations||[]).map((n,r)=>e.jsx("li",{children:n},r))})]})]})]},i))})]})},ts=({roadmap:s,impact:l})=>e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Proposed Solution Roadmap"}),e.jsxs("div",{className:"mb-6 bg-slate-800/50 p-3 rounded-md border-l-4 border-green-500",children:[e.jsxs("h4",{className:"font-semibold text-white flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-green-400"}),"Estimated Business Impact"]}),e.jsx("p",{className:"text-sm text-slate-300 mt-1",children:l||"Not available."})]}),e.jsxs("div",{className:"space-y-4",children:[(s??[]).map((i,o)=>e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0 mt-1",children:o+1}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 justify-between items-center",children:[e.jsx("h4",{className:"font-bold text-lg text-white",children:i.phaseName}),i.timeline&&e.jsxs("span",{className:"text-xs font-semibold text-slate-400 bg-slate-700 px-2 py-1 rounded-full flex items-center gap-1.5",children:[e.jsx(bs,{className:"w-3 h-3"}),i.timeline]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 my-2",children:(i.services??[]).map(t=>e.jsx("span",{className:"px-2 py-1 text-xs text-cyan-300 bg-cyan-900/50 rounded-full",children:t},t))})]})]}),e.jsxs("div",{className:"pl-12",children:[e.jsx("p",{className:"text-sm text-slate-300 mt-2",children:i.description}),e.jsxs("div",{className:"mt-4 space-y-3",children:[i.keyActivities&&i.keyActivities.length>0&&e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-sm text-slate-300 flex items-center gap-2 mb-1",children:[e.jsx(ye,{className:"w-4 h-4 text-slate-400"})," Key Activities"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-400 pl-4",children:i.keyActivities.map((t,n)=>e.jsx("li",{children:t},n))})]}),i.kpisToTrack&&i.kpisToTrack.length>0&&e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-sm text-slate-300 flex items-center gap-2 mb-1",children:[e.jsx(Ms,{className:"w-4 h-4 text-slate-400"})," KPIs to Track"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-400 pl-4",children:i.kpisToTrack.map((t,n)=>e.jsx("li",{children:t},n))})]})]}),e.jsxs("p",{className:"text-sm text-green-300 font-medium mt-4",children:[e.jsx("strong",{children:"Expected Outcome:"})," ",i.expectedOutcome]})]})]},o)),(s??[]).length===0&&e.jsx("p",{className:"text-center text-slate-400",children:"No roadmap steps available."})]})]}),as=({personas:s,draft:l,talkingPoints:i})=>{const[o,t]=a.useState(!1),n=()=>{l&&(navigator.clipboard.writeText(l.replace(/\\n/g,`
`)),t(!0),setTimeout(()=>t(!1),2e3))};return e.jsxs(B,{className:"flex flex-col h-full",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Outreach & Action Plan"}),e.jsxs("div",{className:"space-y-6 flex-grow flex flex-col",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2 text-blue-400",children:[e.jsx(Ss,{className:"w-5 h-5"})," Decision Maker Personas"]}),(s??[]).map((r,c)=>e.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-md mb-2",children:[e.jsx("p",{className:"font-bold text-white",children:r.title}),e.jsx("ul",{className:"text-sm text-slate-300 list-disc list-inside pl-4 mt-1",children:(r.likelyGoals??[]).map((u,d)=>e.jsx("li",{children:u},d))})]},c))]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2 text-blue-400",children:[e.jsx(ye,{className:"w-5 h-5"})," Discovery Call Talking Points"]}),e.jsx("ul",{className:"space-y-1 text-sm text-slate-300 list-disc list-inside pl-4",children:(i??[]).map((r,c)=>e.jsx("li",{children:r},c))})]}),e.jsxs("div",{className:"flex-grow flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 no-print",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-blue-400",children:[e.jsx(Le,{className:"w-5 h-5"})," Outreach Draft"]}),e.jsxs("button",{onClick:n,className:"text-xs font-semibold text-slate-400 hover:text-white flex items-center gap-1",children:[o?e.jsx(ve,{className:"w-4 h-4 text-green-400"}):e.jsx(qe,{className:"w-4 h-4"}),o?"Copied!":"Copy"]})]}),e.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-blue-400 mb-2 hidden print:flex",children:[e.jsx(Le,{className:"w-5 h-5"})," Outreach Draft"]}),e.jsx("pre",{className:"text-sm text-slate-200 bg-slate-800/50 p-4 rounded-md whitespace-pre-wrap font-sans flex-grow",children:(l==null?void 0:l.replace(/\\n/g,`
`))||"No draft available."})]})]})]})},ls=({landscape:s})=>s?e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Competitive Landscape"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Identified Competitors"}),e.jsx("ul",{className:"space-y-2",children:(s.identifiedCompetitors??[]).map((l,i)=>e.jsx("li",{className:"text-sm bg-slate-800/50 p-2 rounded-md",children:e.jsxs("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-400 hover:underline flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"})," ",l.name]})},i))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Keyword & Content Gaps"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(s.keywordGaps??[]).map((l,i)=>e.jsx("span",{className:"px-2 py-1 text-xs text-purple-300 bg-purple-900/50 rounded-full",children:l},i))})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-700",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Strategic Opportunity"}),e.jsx("p",{className:"text-sm text-slate-300",children:s.opportunitySummary})]})]})]}):e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Competitive Landscape"}),e.jsx("p",{className:"text-sm text-center text-slate-400",children:"Competitive landscape data is not available."})]}),ns=({painPoints:s})=>e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Identified Pain Points"}),e.jsx("ul",{className:"space-y-2 list-disc list-inside text-sm text-slate-300",children:(s??[]).length>0?(s??[]).map((l,i)=>e.jsx("li",{children:l},i)):e.jsx("p",{className:"text-center text-slate-400",children:"No specific pain points were identified."})})]}),rs=({sequence:s})=>{const[l,i]=a.useState(null),o=t=>{const n=`Subject: ${t.subject}

${t.body.replace(/\\n/g,`
`)}`;navigator.clipboard.writeText(n),i(t.subject),setTimeout(()=>i(null),2e3)};return e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"AI-Generated Email Sequence"}),e.jsxs("div",{className:"space-y-4",children:[(s??[]).map((t,n)=>e.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h4",{className:"font-semibold text-white",children:["Email ",n+1,": ",t.subject]}),e.jsxs("button",{onClick:()=>o(t),className:"text-xs font-semibold text-slate-400 hover:text-white flex items-center gap-1 no-print",children:[l===t.subject?e.jsx(ve,{className:"w-4 h-4 text-green-400"}):e.jsx(qe,{className:"w-4 h-4"}),l===t.subject?"Copied!":"Copy"]})]}),e.jsxs("p",{className:"text-xs text-slate-400 mb-2",children:["Send Delay: ",t.sendDelayDays," days"]}),e.jsx("pre",{className:"text-sm text-slate-300 bg-slate-900/50 p-2 rounded-md whitespace-pre-wrap font-sans",children:t.body.replace(/\\n/g,`
`)})]},n)),(s??[]).length===0&&e.jsx("p",{className:"text-center text-slate-400",children:"No email sequence available."})]})]})},is=({stack:s})=>!s||s.length===0?e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold text-center",children:"Technology Stack"}),e.jsx("p",{className:"text-sm text-center text-slate-400 mt-2",children:"Could not determine technology stack."})]}):e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Technology Stack"}),e.jsx("div",{className:"space-y-2",children:s.map((l,i)=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 p-2 rounded-md text-sm",children:[e.jsx("span",{className:"font-semibold text-slate-200",children:l.name}),e.jsx("span",{className:"text-xs font-semibold text-cyan-300 bg-cyan-900/50 px-2 py-1 rounded-full",children:l.category})]},i))})]}),os=({wins:s})=>e.jsxs(B,{children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:[e.jsx(Es,{className:"w-6 h-6 text-yellow-300"})," Actionable Quick Wins"]}),e.jsx("ul",{className:"space-y-2 list-disc list-inside text-sm text-slate-300",children:(s??[]).length>0?(s??[]).map((l,i)=>e.jsx("li",{children:l},i)):e.jsx("p",{className:"text-center text-slate-400",children:"No specific quick wins were identified."})})]}),cs=({analysis:s})=>s?e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Value Proposition Analysis"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold uppercase text-slate-400 mb-1",children:"Stated USP"}),e.jsx("blockquote",{className:"border-l-4 border-slate-600 pl-4 italic text-slate-200",children:s.statedUSP})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-bold uppercase text-slate-400 mb-1",children:"Effectiveness"}),e.jsxs("p",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(He,{className:"w-4 h-4 text-green-400"})," ",s.effectiveness]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-bold uppercase text-slate-400 mb-1",children:"Recommendations"}),e.jsx("p",{className:"text-sm text-slate-300",children:s.recommendations})]})]}):e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Value Proposition Analysis"}),e.jsx("p",{className:"text-sm text-center text-slate-400",children:"Analysis not available."})]}),ds=({audit:s})=>{var o,t;if(!s)return e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Technical SEO Audit"}),e.jsx("p",{className:"text-sm text-center text-slate-400",children:"Technical SEO audit data is not available."})]});const l={Good:"bg-green-500/20 text-green-300 border-green-500/50",Fast:"bg-green-500/20 text-green-300 border-green-500/50",Present:"bg-green-500/20 text-green-300 border-green-500/50","Needs Improvement":"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",Average:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",Incomplete:"bg-yellow-500/20 text-yellow-300 border-yellow-500/50","Has Issues":"bg-yellow-500/20 text-yellow-300 border-yellow-500/50",Poor:"bg-red-500/20 text-red-300 border-red-500/50",Slow:"bg-red-500/20 text-red-300 border-red-500/50",Missing:"bg-red-500/20 text-red-300 border-red-500/50"},i=[{title:"Core Web Vitals",icon:Ua,data:s.coreWebVitals},{title:"Mobile Friendliness",icon:Va,data:s.mobileFriendliness},{title:"Site Speed",icon:ws,data:s.siteSpeed},{title:"Security (HTTPS)",icon:ut,data:{status:(o=s.security)!=null&&o.https?"Good":"Poor",details:(t=s.security)==null?void 0:t.details}},{title:"Schema Markup",icon:Ga,data:s.schemaMarkup},{title:"Crawlability",icon:St,data:s.crawlability}];return e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Technical SEO Audit"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(({title:n,icon:r,data:c})=>e.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold text-white flex items-center gap-2",children:[e.jsx(r,{className:"w-5 h-5"})," ",n]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium border ${l[c.status]||l["Needs Improvement"]}`,children:c.status})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:c.details})]},n))})]})},ms=({analysis:s})=>s?e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Projected ROI Analysis"}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("p",{className:"text-6xl font-bold text-green-400",children:[s.estimatedRoiPercentage||0,"%"]}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Estimated ROI within ",s.timeline||"N/A"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-md",children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"Projected Impact"}),e.jsx("p",{className:"text-sm text-slate-300",children:s.projectedImpact||"Not available."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-md",children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"Key Assumptions"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-slate-300 space-y-1",children:(s.assumptions??[]).map((l,i)=>e.jsx("li",{children:l},i))})]})]})]}):e.jsxs(B,{children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-center",children:"Projected ROI Analysis"}),e.jsx("p",{className:"text-sm text-center text-slate-400",children:"ROI analysis is not available for this prospect."})]}),_a=()=>{const[s,l]=a.useState(null),[i,o]=a.useState("overview"),{values:t,handleChange:n,validateForm:r}=Fe({industry:"",location:"",keywords:""},{industry:X.required}),[c,u]=a.useState([]),[d,h]=a.useState(!1),[x,m]=a.useState(""),{values:p,errors:j,touched:S,handleChange:w,handleBlur:g,validateForm:D,resetForm:P}=Fe({url:"",description:"",linkedIn:"",twitter:"",instagram:"",facebook:""},{url:A=>X.required(A)||X.url(A),linkedIn:X.url,twitter:X.url,instagram:X.url,facebook:X.url}),{result:N,isLoading:O,error:q,execute:z,reset:_}=dt("leadGenNurture",A=>xt(A.url,A.description,A.socialUrls)),Q=async A=>{if(A.preventDefault(),!!r()){h(!0),m("");try{const H=await ht(t);u(H)}catch(H){m(H.message||"Failed to find prospects.")}finally{h(!1)}}},J=A=>{l(A.websiteUrl),z({url:A.websiteUrl,description:null,socialUrls:{}},A.websiteUrl)},V=A=>{if(A.preventDefault(),!D())return;l(null);const{url:H,description:T,linkedIn:C,twitter:L,instagram:b,facebook:F}=p;z({url:H,description:T||null,socialUrls:{linkedIn:C,twitter:L,instagram:b,facebook:F}},H)},W=()=>{P(),_(),u([])},Y=()=>{window.print()},I=A=>{const H="w-full bg-slate-800/50 border border-slate-700 rounded-md px-4 py-3 pl-10 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow";return S[A]&&j[A]?`${H} border-red-500 focus:ring-red-500`:H},$=[{id:"overview",label:"Overview"},{id:"presence",label:"Digital Presence"},{id:"strategy",label:"Strategy"},{id:"outreach",label:"Outreach"}],Z=s||p.url;return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"no-print",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(Ds,{className:"w-8 h-8 text-blue-400"}),"Lead Gen & Nurture"]}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Generate AI-powered qualification reports, competitive analysis, and strategic roadmaps for any prospect."})]}),O?e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(Xe,{mode:"auditing",target:Z})}):N&&typeof N!="string"?e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"text-center mb-8 no-print",children:e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(k,{type:"button",onClick:W,variant:"secondary",children:"Start New Audit"}),e.jsxs(k,{type:"button",onClick:Y,children:[e.jsx(Ha,{className:"w-5 h-5 mr-2"})," Print Report"]})]})}),e.jsxs("div",{className:"printable-area",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 print:block hidden",children:"Digital Audit & Strategy Report"}),e.jsx("h2",{className:"text-3xl font-bold text-white print:text-2xl print:text-black",children:N.companyName})]}),e.jsxs("div",{className:"mb-8 no-print",children:[e.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:"Executive Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsxs(B,{className:"text-center !p-4",children:[e.jsx("p",{className:"text-sm uppercase text-slate-400 mb-2",children:"Overall Fit"}),e.jsx(Ae,{score:N.overallScore})]}),e.jsxs(B,{className:"text-center !p-4",children:[e.jsx("p",{className:"text-sm uppercase text-slate-400 mb-2",children:"Technical Health"}),e.jsx(Ae,{score:N.technicalHealthScore})]}),e.jsxs(B,{className:"text-center !p-4",children:[e.jsx("p",{className:"text-sm uppercase text-slate-400 mb-2",children:"Content Authority"}),e.jsx(Ae,{score:N.contentAuthorityScore})]})]})]}),e.jsx("div",{className:"mb-8 border-b border-slate-800 no-print",children:e.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:$.map(A=>e.jsx("button",{onClick:()=>o(A.id),className:`${A.id===i?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-slate-200 hover:border-slate-500"}
                                        whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`,children:A.label},A.id))})}),e.jsxs("div",{className:"no-print",children:[i==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsxs(B,{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:N.companyName}),e.jsx("p",{className:"text-slate-300 text-sm mt-2",children:N.summary}),e.jsx("span",{className:"mt-4 inline-block text-xs font-semibold text-purple-300 bg-purple-900/50 px-2 py-1 rounded-full",children:N.estimatedValue})]})," ",e.jsx(cs,{analysis:N.valuePropositionAnalysis})," ",e.jsx("div",{className:"lg:col-span-2",children:e.jsx(os,{wins:N.quickWins})})," ",e.jsx(ns,{painPoints:N.painPoints})]}),i==="presence"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx(ds,{audit:N.technicalSeoAudit})," ",e.jsx(es,{swot:N.swotAnalysis})," ",e.jsx(ss,{social:N.socialPresenceAnalysis})," ",e.jsx(ls,{landscape:N.competitiveLandscape})," ",e.jsx(is,{stack:N.technologyStack})]}),i==="strategy"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx(ts,{roadmap:N.solutionRoadmap,impact:N.estimatedBusinessImpact}),e.jsx(ms,{analysis:N.roiAnalysis})]}),i==="outreach"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsx(as,{personas:N.decisionMakerPersonas,draft:N.outreachDraft,talkingPoints:N.talkingPoints})," ",e.jsx(rs,{sequence:N.emailSequence})]})]}),e.jsxs("div",{className:"hidden print:block space-y-8 print-grid-container",children:[e.jsxs(B,{className:"text-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:N.companyName}),e.jsx("p",{className:"text-slate-300 text-sm mt-2",children:N.summary}),e.jsx("span",{className:"mt-4 inline-block text-xs font-semibold text-purple-300 bg-purple-900/50 px-2 py-1 rounded-full",children:N.estimatedValue})]}),e.jsx(cs,{analysis:N.valuePropositionAnalysis}),e.jsx(os,{wins:N.quickWins}),e.jsx(ns,{painPoints:N.painPoints}),e.jsx(ts,{roadmap:N.solutionRoadmap,impact:N.estimatedBusinessImpact}),e.jsx(ms,{analysis:N.roiAnalysis}),e.jsx(ds,{audit:N.technicalSeoAudit}),e.jsx(es,{swot:N.swotAnalysis}),e.jsx(ss,{social:N.socialPresenceAnalysis}),e.jsx(ls,{landscape:N.competitiveLandscape}),e.jsx(is,{stack:N.technologyStack}),e.jsx(as,{personas:N.decisionMakerPersonas,draft:N.outreachDraft,talkingPoints:N.talkingPoints}),e.jsx(rs,{sequence:N.emailSequence})]})]})]}):e.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto no-print",children:[e.jsx(B,{children:e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-center flex items-center justify-center gap-2",children:[e.jsx(Ms,{className:"w-6 h-6 text-blue-400"}),"1. Find New Prospects"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"industry",className:f,children:"Industry / Niche*"}),e.jsx("input",{type:"text",name:"industry",id:"industry",value:t.industry,onChange:n,className:y,placeholder:"e.g., B2B SaaS for HR"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:f,children:"Location"}),e.jsx("input",{type:"text",name:"location",id:"location",value:t.location,onChange:n,className:y,placeholder:"e.g., Dubai, UAE"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"keywords",className:f,children:"Keywords / Technologies"}),e.jsx("input",{type:"text",name:"keywords",id:"keywords",value:t.keywords,onChange:n,className:y,placeholder:"e.g., uses HubSpot"})]})]}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs(k,{type:"submit",disabled:d,children:[e.jsx(de,{className:"w-5 h-5 mr-2"}),d?"Searching...":"Find Prospects"]})})]})}),d?e.jsx(Xe,{mode:"finding"}):e.jsxs(e.Fragment,{children:[x&&e.jsx("p",{className:"text-red-400 text-center",children:x}),c.length>0&&e.jsx("div",{className:"bg-slate-900/70 border border-slate-800 rounded-lg overflow-hidden animate-fade-in",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Company Name"}),e.jsx("th",{className:"p-3",children:"Website"}),e.jsx("th",{className:"p-3"})]})}),e.jsx("tbody",{children:c.map(A=>{const H=O&&s===A.websiteUrl;return e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("td",{className:"p-3 font-medium text-white",children:A.companyName}),e.jsx("td",{className:"p-3",children:e.jsx("a",{href:A.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:A.websiteUrl})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx(k,{onClick:()=>J(A),variant:"secondary",className:"!py-1 !px-3 !text-xs",disabled:O,children:H?"Auditing...":"Run Audit"})})]},A.websiteUrl)})})]})})]}),e.jsx(B,{children:e.jsxs("form",{onSubmit:V,className:"space-y-6",id:"manual-audit-form",children:[e.jsxs("h2",{className:"text-xl font-bold text-center flex items-center justify-center gap-2",children:[e.jsx(mt,{className:"w-6 h-6 text-blue-400"}),"2. Perform a Manual Audit"]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:f,children:"Website URL*"}),e.jsx("input",{type:"text",name:"url",id:"url",value:p.url,onChange:w,onBlur:g,className:"w-full bg-slate-800/50 border border-slate-700 rounded-md px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"}),S.url&&j.url&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:j.url})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:f,children:"Business Description (Optional)"}),e.jsx("textarea",{name:"description",id:"description",rows:3,value:p.description,onChange:w,onBlur:g,className:"w-full bg-slate-800/50 border border-slate-700 rounded-md px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Leave blank to let AI generate from the website..."}),S.description&&j.description&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:j.description})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-sm font-medium text-slate-300 mb-2",children:"Social Profiles (Optional)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",name:"linkedIn",value:p.linkedIn,onChange:w,onBlur:g,className:I("linkedIn"),placeholder:"LinkedIn URL"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",name:"twitter",value:p.twitter,onChange:w,onBlur:g,className:I("twitter"),placeholder:"X / Twitter URL"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",name:"instagram",value:p.instagram,onChange:w,onBlur:g,className:I("instagram"),placeholder:"Instagram URL"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),e.jsx("input",{type:"text",name:"facebook",value:p.facebook,onChange:w,onBlur:g,className:I("facebook"),placeholder:"Facebook URL"})]})]})]}),e.jsx("div",{className:"text-right pt-2",children:e.jsx(k,{type:"submit",disabled:O,children:O?"Analyzing...":"Run Full Audit"})}),q&&e.jsx("div",{role:"alert",className:"text-red-400 text-center pt-2",children:q})]})})]})]})},ol=()=>{const{currentUser:s,logout:l}=a.useContext(ne),[i,o]=a.useState("dashboard"),t=a.useCallback(r=>{var c;return s?s.role==="Admin"||r==="dashboard"?!0:((c=s.permissions)==null?void 0:c.includes(r))??!1:!1},[s]),n=()=>{if(!s)return null;if(!t(i))return setTimeout(()=>o("dashboard"),0),e.jsx(Je,{setActiveView:o});switch(i){case"blog":return e.jsx(Kt,{});case"projects":return e.jsx(Yt,{});case"services":return e.jsx(Jt,{});case"users":return e.jsx(ea,{});case"clients":return e.jsx(ta,{});case"testimonials":return e.jsx(la,{});case"analytics":return e.jsx(ia,{});case"pricing":return e.jsx(ca,{});case"invoicing":return e.jsx(pa,{});case"quotations":return e.jsx(ga,{});case"documentHistory":return e.jsx(ba,{});case"tasks":return e.jsx(Da,{});case"socials":return e.jsx(Ta,{});case"strategist":return e.jsx(Pa,{});case"horizonScanner":return e.jsx(Ma,{});case"careers":return e.jsx(Ba,{});case"jobApplications":return e.jsx(qa,{});case"leadGenNurture":return e.jsx(_a,{});case"dashboard":default:return e.jsx(Je,{setActiveView:o})}};return s?e.jsx(Ht,{currentUser:s,onLogout:l,activeView:i,setActiveView:o,hasPermission:t,children:n()}):e.jsx(It,{})};export{ol as default};
